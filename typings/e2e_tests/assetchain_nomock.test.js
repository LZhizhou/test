"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const e2etestlib_1 = require("./e2etestlib");
const api_1 = require("src/apis/keystore/api");
const bn_js_1 = __importDefault(require("bn.js"));
describe("AssetChain", () => {
    let tx = { value: "" };
    let asset = { value: "" };
    let addrB = { value: "" };
    let addrC = { value: "" };
    const axia = (0, e2etestlib_1.getAxia)();
    const assetchain = axia.AssetChain();
    const keystore = new api_1.KeystoreAPI(axia);
    const user = "axiaJsAssetChainUser";
    const passwd = "axiaJsP1ssw4rd";
    const badUser = "asdfasdfsa";
    const badPass = "pass";
    const memo = "hello world";
    const whaleAddr = "X-custom18jma8ppw3nhx5r4ap8clazz0dps7rv5u9xde7p";
    const key = "PrivateKey-ewoqjP7PxY4yr3iLTpLisriqt94hdyDFNgchSxGGztUrTXtNN";
    // test_name        response_promise                            resp_fn          matcher           expected_value/obtained_value
    const tests_spec = [
        [
            "createUser",
            () => keystore.createUser(user, passwd),
            (x) => x,
            e2etestlib_1.Matcher.toBe,
            () => true
        ],
        [
            "createaddrB",
            () => assetchain.createAddress(user, passwd),
            (x) => x,
            e2etestlib_1.Matcher.Get,
            () => addrB
        ],
        [
            "createaddrB",
            () => assetchain.createAddress(user, passwd),
            (x) => x,
            e2etestlib_1.Matcher.Get,
            () => addrC
        ],
        [
            "incorrectUser",
            () => assetchain.send(badUser, passwd, "AVAX", 10, addrB.value, [addrC.value], addrB.value, memo),
            (x) => x,
            e2etestlib_1.Matcher.toThrow,
            () => `problem retrieving user "${badUser}": incorrect password for user "${badUser}"`
        ],
        [
            "incorrectPass",
            () => assetchain.send(user, badPass, "AVAX", 10, addrB.value, [addrC.value], addrB.value, memo),
            (x) => x,
            e2etestlib_1.Matcher.toThrow,
            () => `problem retrieving user "${user}": incorrect password for user "${user}"`
        ],
        [
            "getBalance",
            () => assetchain.getBalance(whaleAddr, "AVAX"),
            (x) => x.balance,
            e2etestlib_1.Matcher.toBe,
            () => "300000000000000000"
        ],
        [
            "getBalance2",
            () => assetchain.getBalance(whaleAddr, "AXC"),
            (x) => x.utxoIDs[0].txID,
            e2etestlib_1.Matcher.toBe,
            () => "BUuypiq2wyuLMvyhzFXcPyxPMCgSp7eeDohhQRqTChoBjKziC"
        ],
        [
            "importKey",
            () => assetchain.importKey(user, passwd, key),
            (x) => x,
            e2etestlib_1.Matcher.toBe,
            () => whaleAddr
        ],
        [
            "send",
            () => assetchain.send(user, passwd, "AVAX", 10, addrB.value, [whaleAddr], whaleAddr, memo),
            (x) => x.txID,
            e2etestlib_1.Matcher.Get,
            () => tx
        ],
        [
            "sendMultiple",
            () => assetchain.sendMultiple(user, passwd, [
                { assetID: "AVAX", amount: 10, to: addrB.value },
                { assetID: "AVAX", amount: 20, to: addrC.value }
            ], [whaleAddr], whaleAddr, memo),
            (x) => x.txID,
            e2etestlib_1.Matcher.Get,
            () => tx
        ],
        [
            "listAddrs",
            () => assetchain.listAddresses(user, passwd),
            (x) => x.sort(),
            e2etestlib_1.Matcher.toEqual,
            () => [whaleAddr, addrB.value, addrC.value].sort()
        ],
        [
            "exportKey",
            () => assetchain.exportKey(user, passwd, addrB.value),
            (x) => x,
            e2etestlib_1.Matcher.toMatch,
            () => /PrivateKey-\w*/
        ],
        [
            "export",
            () => assetchain.export(user, passwd, "C" + addrB.value.substring(1), new bn_js_1.default(10), "AXC"),
            (x) => x,
            e2etestlib_1.Matcher.toThrow,
            () => "couldn't unmarshal an argument"
        ],
        [
            "import",
            () => assetchain.import(user, passwd, addrB.value, "P"),
            (x) => x,
            e2etestlib_1.Matcher.toThrow,
            () => "problem issuing transaction: no import inputs"
        ],
        [
            "createFixed",
            () => assetchain.createFixedCapAsset(user, passwd, "Some Coin", "SCC", 0, [
                { address: whaleAddr, amount: "10000" }
            ]),
            (x) => x,
            e2etestlib_1.Matcher.Get,
            () => asset
        ],
        [
            "createVar",
            () => assetchain.createVariableCapAsset(user, passwd, "Some Coin", "SCC", 0, [
                { minters: [whaleAddr], threshold: 1 }
            ]),
            (x) => x,
            e2etestlib_1.Matcher.Get,
            () => asset
        ],
        [
            "mint",
            () => assetchain.mint(user, passwd, 1500, asset.value, addrB.value, [whaleAddr]),
            (x) => x,
            e2etestlib_1.Matcher.toThrow,
            () => "couldn't unmarshal an argument"
        ],
        [
            "getTx",
            () => assetchain.getTx(tx.value),
            (x) => x,
            e2etestlib_1.Matcher.toMatch,
            () => /\w+/
        ],
        [
            "getTxStatus",
            () => assetchain.getTxStatus(tx.value),
            (x) => x,
            e2etestlib_1.Matcher.toBe,
            () => "Processing"
        ],
        [
            "getAssetDesc",
            () => assetchain.getAssetDescription(asset.value),
            (x) => [x.name, x.symbol],
            e2etestlib_1.Matcher.toEqual,
            () => ["Some Coin", "SCC"]
        ]
    ];
    (0, e2etestlib_1.createTests)(tests_spec);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXRjaGFpbl9ub21vY2sudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2UyZV90ZXN0cy9hc3NldGNoYWluX25vbW9jay50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNkNBQTREO0FBQzVELCtDQUFtRDtBQUNuRCxrREFBc0I7QUFFdEIsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFTLEVBQUU7SUFDaEMsSUFBSSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUE7SUFDdEIsSUFBSSxLQUFLLEdBQUcsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUE7SUFDekIsSUFBSSxLQUFLLEdBQUcsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUE7SUFDekIsSUFBSSxLQUFLLEdBQUcsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUE7SUFFekIsTUFBTSxJQUFJLEdBQUcsSUFBQSxvQkFBTyxHQUFFLENBQUE7SUFDdEIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFBO0lBQ3BDLE1BQU0sUUFBUSxHQUFHLElBQUksaUJBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUV0QyxNQUFNLElBQUksR0FBVyxzQkFBc0IsQ0FBQTtJQUMzQyxNQUFNLE1BQU0sR0FBVyxnQkFBZ0IsQ0FBQTtJQUN2QyxNQUFNLE9BQU8sR0FBVyxZQUFZLENBQUE7SUFDcEMsTUFBTSxPQUFPLEdBQVcsTUFBTSxDQUFBO0lBQzlCLE1BQU0sSUFBSSxHQUFXLGFBQWEsQ0FBQTtJQUNsQyxNQUFNLFNBQVMsR0FBVyxpREFBaUQsQ0FBQTtJQUMzRSxNQUFNLEdBQUcsR0FDUCw4REFBOEQsQ0FBQTtJQUVoRSxnSUFBZ0k7SUFDaEksTUFBTSxVQUFVLEdBQVE7UUFDdEI7WUFDRSxZQUFZO1lBQ1osR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFD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MmV0ZXN0bGliXCJcbmltcG9ydCB7IEtleXN0b3JlQVBJIH0gZnJvbSBcInNyYy9hcGlzL2tleXN0b3JlL2FwaVwiXG5pbXBvcnQgQk4gZnJvbSBcImJuLmpzXCJcblxuZGVzY3JpYmUoXCJBc3NldENoYWluXCIsICgpOiB2b2lkID0+IHtcbiAgbGV0IHR4ID0geyB2YWx1ZTogXCJcIiB9XG4gIGxldCBhc3NldCA9IHsgdmFsdWU6IFwiXCIgfVxuICBsZXQgYWRkckIgPSB7IHZhbHVlOiBcIlwiIH1cbiAgbGV0IGFkZHJDID0geyB2YWx1ZTogXCJcIiB9XG5cbiAgY29uc3QgYXhpYSA9IGdldEF4aWEoKVxuICBjb25zdCBhc3NldGNoYWluID0gYXhpYS5Bc3NldENoYWluKClcbiAgY29uc3Qga2V5c3RvcmUgPSBuZXcgS2V5c3RvcmVBUEkoYXhpYSlcblxuICBjb25zdCB1c2VyOiBzdHJpbmcgPSBcImF4aWFKc0Fzc2V0Q2hhaW5Vc2VyXCJcbiAgY29uc3QgcGFzc3dkOiBzdHJpbmcgPSBcImF4aWFKc1Axc3N3NHJkXCJcbiAgY29uc3QgYmFkVXNlcjogc3RyaW5nID0gXCJhc2RmYXNkZnNhXCJcbiAgY29uc3QgYmFkUGFzczogc3RyaW5nID0gXCJwYXNzXCJcbiAgY29uc3QgbWVtbzogc3RyaW5nID0gXCJoZWxsbyB3b3JsZFwiXG4gIGNvbnN0IHdoYWxlQWRkcjogc3RyaW5nID0gXCJYLWN1c3RvbTE4am1hOHBwdzNuaHg1cjRhcDhjbGF6ejBkcHM3cnY1dTl4ZGU3cFwiXG4gIGNvbnN0IGtleTogc3RyaW5nID1cbiAgICBcIlByaXZhdGVLZXktZXdvcWpQN1B4WTR5cjNpTFRwTGlzcmlxdDk0aGR5REZOZ2NoU3hHR3p0VXJUWHROTlwiXG5cbiAgLy8gdGVzdF9uYW1lICAgICAgICByZXNwb25zZV9wcm9taXNlICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BfZm4gICAgICAgICAgbWF0Y2hlciAgICAgICAgICAgZXhwZWN0ZWRfdmFsdWUvb2J0YWluZWRfdmFsdWVcbiAgY29uc3QgdGVzdHNfc3BlYzogYW55ID0gW1xuICAgIFtcbiAgICAgIFwiY3JlYXRlVXNlclwiLFxuICAgICAgKCkgPT4ga2V5c3RvcmUuY3JlYXRlVXNlcih1c2VyLCBwYXNzd2QpLFxuICAgICAgKHgpID0+IHgsXG4gICAgICBNYXRjaGVyLnRvQmUsXG4gICAgICAoKSA9PiB0cnVlXG4gICAgXSxcbiAgICBbXG4gICAgICBcImNyZWF0ZWFkZHJCXCIsXG4gICAgICAoKSA9PiBhc3NldGNoYWluLmNyZWF0ZUFkZHJlc3ModXNlciwgcGFzc3dkKSxcbiAgICAgICh4KSA9PiB4LFxuICAgICAgTWF0Y2hlci5HZXQsXG4gICAgICAoKSA9PiBhZGRyQlxuICAgIF0sXG4gICAgW1xuICAgICAgXCJjcmVhdGVhZGRyQlwiLFxuICAgICAgKCkgPT4gYXNzZXRjaGFpbi5jcmVhdGVBZGRyZXNzKHVzZXIsIHBhc3N3ZCksXG4gICAgICAoeCkgPT4geCxcbiAgICAgIE1hdGNoZXIuR2V0LFxuICAgICAgKCkgPT4gYWRkckNcbiAgICBdLFxuICAgIFtcbiAgICAgIFwiaW5jb3JyZWN0VXNlclwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgYXNzZXRjaGFpbi5zZW5kKFxuICAgICAgICAgIGJhZFVzZXIsXG4gICAgICAgICAgcGFzc3dkLFxuICAgICAgICAgIFwiQVZBWFwiLFxuICAgICAgICAgIDEwLFxuICAgICAgICAgIGFkZHJCLnZhbHVlLFxuICAgICAgICAgIFthZGRyQy52YWx1ZV0sXG4gICAgICAgICAgYWRkckIudmFsdWUsXG4gICAgICAgICAgbWVtb1xuICAgICAgICApLFxuICAgICAgKHgpID0+IHgsXG4gICAgICBNYXRjaGVyLnRvVGhyb3csXG4gICAgICAoKSA9PiBgcHJvYmxlbSByZXRyaWV2aW5nIHVzZXIgXCIke2JhZFVzZXJ9XCI6IGluY29ycmVjdCBwYXNzd29yZCBmb3IgdXNlciBcIiR7YmFkVXNlcn1cImBcbiAgICBdLFxuICAgIFtcbiAgICAgIFwiaW5jb3JyZWN0UGFzc1wiLFxuICAgICAgKCkgPT5cbiAgICAgICAgYXNzZXRjaGFpbi5zZW5kKFxuICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgYmFkUGFzcyxcbiAgICAgICAgICBcIkFWQVhcIixcbiAgICAgICAgICAxMCxcbiAgICAgICAgICBhZGRyQi52YWx1ZSxcbiAgICAgICAgICBbYWRkckMudmFsdWVdLFxuICAgICAgICAgIGFkZHJCLnZhbHVlLFxuICAgICAgICAgIG1lbW9cbiAgICAgICAgKSxcbiAgICAgICh4KSA9PiB4LFxuICAgICAgTWF0Y2hlci50b1Rocm93LFxuICAgICAgKCkgPT4gYHByb2JsZW0gcmV0cmlldmluZyB1c2VyIFwiJHt1c2VyfVwiOiBpbmNvcnJlY3QgcGFzc3dvcmQgZm9yIHVzZXIgXCIke3VzZXJ9XCJgXG4gICAgXSxcbiAgICBbXG4gICAgICBcImdldEJhbGFuY2VcIixcbiAgICAgICgpID0+IGFzc2V0Y2hhaW4uZ2V0QmFsYW5jZSh3aGFsZUFkZHIsIFwiQVZBWFwiKSxcbiAgICAgICh4KSA9PiB4LmJhbGFuY2UsXG4gICAgICBNYXRjaGVyLnRvQmUsXG4gICAgICAoKSA9PiBcIjMwMDAwMDAwMDAwMDAwMDAwMFwiXG4gICAgXSxcbiAgICBbXG4gICAgICBcImdldEJhbGFuY2UyXCIsXG4gICAgICAoKSA9PiBhc3NldGNoYWluLmdldEJhbGFuY2Uod2hhbGVBZGRyLCBcIkFYQ1wiKSxcbiAgICAgICh4KSA9PiB4LnV0eG9JRHNbMF0udHhJRCxcbiAgICAgIE1hdGNoZXIudG9CZSxcbiAgICAgICgpID0+IFwiQlV1eXBpcTJ3eXVMTXZ5aHpGWGNQeXhQTUNnU3A3ZWVEb2hoUVJxVENob0JqS3ppQ1wiXG4gICAgXSxcbiAgICBbXG4gICAgICBcImltcG9ydEtleVwiLFxuICAgICAgKCkgPT4gYXNzZXRjaGFpbi5pbXBvcnRLZXkodXNlciwgcGFzc3dkLCBrZXkpLFxuICAgICAgKHgpID0+IHgsXG4gICAgICBNYXRjaGVyLnRvQmUsXG4gICAgICAoKSA9PiB3aGFsZUFkZHJcbiAgICBdLFxuICAgIFtcbiAgICAgIFwic2VuZFwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgYXNzZXRjaGFpbi5zZW5kKFxuICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgcGFzc3dkLFxuICAgICAgICAgIFwiQVZBWFwiLFxuICAgICAgICAgIDEwLFxuICAgICAgICAgIGFkZHJCLnZhbHVlLFxuICAgICAgICAgIFt3aGFsZUFkZHJdLFxuICAgICAgICAgIHdoYWxlQWRkcixcbiAgICAgICAgICBtZW1vXG4gICAgICAgICksXG4gICAgICAoeCkgPT4geC50eElELFxuICAgICAgTWF0Y2hlci5HZXQsXG4gICAgICAoKSA9PiB0eFxuICAgIF0sXG4gICAgW1xuICAgICAgXCJzZW5kTXVsdGlwbGVcIixcbiAgICAgICgpID0+XG4gICAgICAgIGFzc2V0Y2hhaW4uc2VuZE11bHRpcGxlKFxuICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgcGFzc3dkLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHsgYXNzZXRJRDogXCJBVkFYXCIsIGFtb3VudDogMTAsIHRvOiBhZGRyQi52YWx1ZSB9LFxuICAgICAgICAgICAgeyBhc3NldElEOiBcIkFWQVhcIiwgYW1vdW50OiAyMCwgdG86IGFkZHJDLnZhbHVlIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFt3aGFsZUFkZHJdLFxuICAgICAgICAgIHdoYWxlQWRkcixcbiAgICAgICAgICBtZW1vXG4gICAgICAgICksXG4gICAgICAoeCkgPT4geC50eElELFxuICAgICAgTWF0Y2hlci5HZXQsXG4gICAgICAoKSA9PiB0eFxuICAgIF0sXG4gICAgW1xuICAgICAgXCJsaXN0QWRkcnNcIixcbiAgICAgICgpID0+IGFzc2V0Y2hhaW4ubGlzdEFkZHJlc3Nlcyh1c2VyLCBwYXNzd2QpLFxuICAgICAgKHgpID0+IHguc29ydCgpLFxuICAgICAgTWF0Y2hlci50b0VxdWFsLFxuICAgICAgKCkgPT4gW3doYWxlQWRkciwgYWRkckIudmFsdWUsIGFkZHJDLnZhbHVlXS5zb3J0KClcbiAgICBdLFxuICAgIFtcbiAgICAgIFwiZXhwb3J0S2V5XCIsXG4gICAgICAoKSA9PiBhc3NldGNoYWluLmV4cG9ydEtleSh1c2VyLCBwYXNzd2QsIGFkZHJCLnZhbHVlKSxcbiAgICAgICh4KSA9PiB4LFxuICAgICAgTWF0Y2hlci50b01hdGNoLFxuICAgICAgKCkgPT4gL1ByaXZhdGVLZXktXFx3Ki9cbiAgICBdLFxuICAgIFtcbiAgICAgIFwiZXhwb3J0XCIsXG4gICAgICAoKSA9PlxuICAgICAgICBhc3NldGNoYWluLmV4cG9ydChcbiAgICAgICAgICB1c2VyLFxuICAgICAgICAgIHBhc3N3ZCxcbiAgICAgICAgICBcIkNcIiArIGFkZHJCLnZhbHVlLnN1YnN0cmluZygxKSxcbiAgICAgICAgICBuZXcgQk4oMTApLFxuICAgICAgICAgIFwiQVhDXCJcbiAgICAgICAgKSxcbiAgICAgICh4KSA9PiB4LFxuICAgICAgTWF0Y2hlci50b1Rocm93LFxuICAgICAgKCkgPT4gXCJjb3VsZG4ndCB1bm1hcnNoYWwgYW4gYXJndW1lbnRcIlxuICAgIF0sXG4gICAgW1xuICAgICAgXCJpbXBvcnRcIixcbiAgICAgICgpID0+IGFzc2V0Y2hhaW4uaW1wb3J0KHVzZXIsIHBhc3N3ZCwgYWRkckIudmFsdWUsIFwiUFwiKSxcbiAgICAgICh4KSA9PiB4LFxuICAgICAgTWF0Y2hlci50b1Rocm93LFxuICAgICAgKCkgPT4gXCJwcm9ibGVtIGlzc3VpbmcgdHJhbnNhY3Rpb246IG5vIGltcG9ydCBpbnB1dHNcIlxuICAgIF0sXG4gICAgW1xuICAgICAgXCJjcmVhdGVGaXhlZFwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgYXNzZXRjaGFpbi5jcmVhdGVGaXhlZENhcEFzc2V0KHVzZXIsIHBhc3N3ZCwgXCJTb21lIENvaW5cIiwgXCJTQ0NcIiwgMCwgW1xuICAgICAgICAgIHsgYWRkcmVzczogd2hhbGVBZGRyLCBhbW91bnQ6IFwiMTAwMDBcIiB9XG4gICAgICAgIF0pLFxuICAgICAgKHgpID0+IHgsXG4gICAgICBNYXRjaGVyLkdldCxcbiAgICAgICgpID0+IGFzc2V0XG4gICAgXSxcbiAgICBbXG4gICAgICBcImNyZWF0ZVZhclwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgYXNzZXRjaGFpbi5jcmVhdGVWYXJpYWJsZUNhcEFzc2V0KHVzZXIsIHBhc3N3ZCwgXCJTb21lIENvaW5cIiwgXCJTQ0NcIiwgMCwgW1xuICAgICAgICAgIHsgbWludGVyczogW3doYWxlQWRkcl0sIHRocmVzaG9sZDogMSB9XG4gICAgICAgIF0pLFxuICAgICAgKHgpID0+IHgsXG4gICAgICBNYXRjaGVyLkdldCxcbiAgICAgICgpID0+IGFzc2V0XG4gICAgXSxcbiAgICBbXG4gICAgICBcIm1pbnRcIixcbiAgICAgICgpID0+XG4gICAgICAgIGFzc2V0Y2hhaW4ubWludCh1c2VyLCBwYXNzd2QsIDE1MDAsIGFzc2V0LnZhbHVlLCBhZGRyQi52YWx1ZSwgW3doYWxlQWRkcl0pLFxuICAgICAgKHgpID0+IHgsXG4gICAgICBNYXRjaGVyLnRvVGhyb3csXG4gICAgICAoKSA9PiBcImNvdWxkbid0IHVubWFyc2hhbCBhbiBhcmd1bWVudFwiXG4gICAgXSxcbiAgICBbXG4gICAgICBcImdldFR4XCIsXG4gICAgICAoKSA9PiBhc3NldGNoYWluLmdldFR4KHR4LnZhbHVlKSxcbiAgICAgICh4KSA9PiB4LFxuICAgICAgTWF0Y2hlci50b01hdGNoLFxuICAgICAgKCkgPT4gL1xcdysvXG4gICAgXSxcbiAgICBbXG4gICAgICBcImdldFR4U3RhdHVzXCIsXG4gICAgICAoKSA9PiBhc3NldGNoYWluLmdldFR4U3RhdHVzKHR4LnZhbHVlKSxcbiAgICAgICh4KSA9PiB4LFxuICAgICAgTWF0Y2hlci50b0JlLFxuICAgICAgKCkgPT4gXCJQcm9jZXNzaW5nXCJcbiAgICBdLFxuICAgIFtcbiAgICAgIFwiZ2V0QXNzZXREZXNjXCIsXG4gICAgICAoKSA9PiBhc3NldGNoYWluLmdldEFzc2V0RGVzY3JpcHRpb24oYXNzZXQudmFsdWUpLFxuICAgICAgKHgpID0+IFt4Lm5hbWUsIHguc3ltYm9sXSxcbiAgICAgIE1hdGNoZXIudG9FcXVhbCxcbiAgICAgICgpID0+IFtcIlNvbWUgQ29pblwiLCBcIlNDQ1wiXVxuICAgIF1cbiAgXVxuXG4gIGNyZWF0ZVRlc3RzKHRlc3RzX3NwZWMpXG59KSJdfQ==