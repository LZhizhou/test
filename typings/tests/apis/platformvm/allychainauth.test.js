"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const buffer_1 = require("buffer/");
const platformvm_1 = require("src/apis/platformvm");
const bintools_1 = __importDefault(require("src/utils/bintools"));
/**
 * @ignore
 */
const bintools = bintools_1.default.getInstance();
describe("AllychainAuth", () => {
    const allychainAuth1 = new platformvm_1.AllychainAuth();
    const allychainAuth2 = new platformvm_1.AllychainAuth();
    test("getters", () => {
        const typeName = allychainAuth1.getTypeName();
        expect(typeName).toBe("AllychainAuth");
        const typeID = allychainAuth1.getTypeID();
        expect(typeID).toBe(10);
        let addressIndex = buffer_1.Buffer.alloc(4);
        addressIndex.writeUIntBE(0, 0, 4);
        allychainAuth1.addAddressIndex(addressIndex);
        addressIndex = buffer_1.Buffer.alloc(4);
        addressIndex.writeUIntBE(1, 0, 4);
        allychainAuth1.addAddressIndex(addressIndex);
        const numAddressIndices = allychainAuth1.getNumAddressIndices();
        expect(numAddressIndices).toBe(2);
        const addressIndices = allychainAuth1.getAddressIndices();
        expect(buffer_1.Buffer.isBuffer(addressIndices[0])).toBeTruthy();
        expect(bintools.fromBufferToBN(addressIndices[0]).toNumber()).toBe(0);
        expect(bintools.fromBufferToBN(addressIndices[1]).toNumber()).toBe(1);
    });
    test("toBuffer", () => {
        const allychainAuth1Buf = allychainAuth1.toBuffer();
        allychainAuth2.fromBuffer(allychainAuth1Buf);
        const allychainAuth1Hex = allychainAuth1.toBuffer().toString("hex");
        const allychainAuth2Hex = allychainAuth2.toBuffer().toString("hex");
        expect(allychainAuth1Hex).toBe(allychainAuth2Hex);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxseWNoYWluYXV0aC50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdGVzdHMvYXBpcy9wbGF0Zm9ybXZtL2FsbHljaGFpbmF1dGgudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9DQUFnQztBQUNoQyxvREFBbUQ7QUFDbkQsa0VBQXlDO0FBRXpDOztHQUVHO0FBQ0gsTUFBTSxRQUFRLEdBQWEsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtBQUVqRCxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQVMsRUFBRTtJQUNuQyxNQUFNLGNBQWMsR0FBa0IsSUFBSSwwQkFBYSxFQUFFLENBQUE7SUFDekQsTUFBTSxjQUFjLEdBQWtCLElBQUksMEJBQWEsRUFBRSxDQUFBO0lBRXpELElBQUksQ0FBQyxTQUFTLEVBQUUsR0FBUyxFQUFFO1FBQ3pCLE1BQU0sUUFBUSxHQUFXLGNBQWMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtRQUNyRCxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFBO1FBRXRDLE1BQU0sTUFBTSxHQUFXLGNBQWMsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUNqRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1FBRXZCLElBQUksWUFBWSxHQUFXLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDMUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQ2pDLGNBQWMsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDNUMsWUFBWSxHQUFHLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDOUIsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQ2pDLGNBQWMsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUE7UUFFNUMsTUFBTSxpQkFBaUIsR0FBVyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsQ0FBQTtRQUN2RSxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFFakMsTUFBTSxjQUFjLEdBQWEsY0FBYyxDQUFDLGlCQUFpQixFQUFFLENBQUE7UUFDbkUsTUFBTSxDQUFDLGVBQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQTtRQUN2RCxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNyRSxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUN2RSxDQUFDLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FBUyxFQUFFO1FBQzFCLE1BQU0saUJBQWlCLEdBQVcsY0FBYyxDQUFDLFFBQVEsRUFBRSxDQUFBO1FBQzNELGNBQWMsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtRQUM1QyxNQUFNLGlCQUFpQixHQUFXLGNBQWMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDM0UsTUFBTSxpQkFBaUIsR0FBVyxjQUFjLENBQUMsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQzNFLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFBO0lBQ25ELENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiYnVmZmVyL1wiXG5pbXBvcnQgeyBBbGx5Y2hhaW5BdXRoIH0gZnJvbSBcInNyYy9hcGlzL3BsYXRmb3Jtdm1cIlxuaW1wb3J0IEJpblRvb2xzIGZyb20gXCJzcmMvdXRpbHMvYmludG9vbHNcIlxuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgYmludG9vbHM6IEJpblRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKVxuXG5kZXNjcmliZShcIkFsbHljaGFpbkF1dGhcIiwgKCk6IHZvaWQgPT4ge1xuICBjb25zdCBhbGx5Y2hhaW5BdXRoMTogQWxseWNoYWluQXV0aCA9IG5ldyBBbGx5Y2hhaW5BdXRoKClcbiAgY29uc3QgYWxseWNoYWluQXV0aDI6IEFsbHljaGFpbkF1dGggPSBuZXcgQWxseWNoYWluQXV0aCgpXG5cbiAgdGVzdChcImdldHRlcnNcIiwgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHR5cGVOYW1lOiBzdHJpbmcgPSBhbGx5Y2hhaW5BdXRoMS5nZXRUeXBlTmFtZSgpXG4gICAgZXhwZWN0KHR5cGVOYW1lKS50b0JlKFwiQWxseWNoYWluQXV0aFwiKVxuXG4gICAgY29uc3QgdHlwZUlEOiBudW1iZXIgPSBhbGx5Y2hhaW5BdXRoMS5nZXRUeXBlSUQoKVxuICAgIGV4cGVjdCh0eXBlSUQpLnRvQmUoMTApXG5cbiAgICBsZXQgYWRkcmVzc0luZGV4OiBCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNClcbiAgICBhZGRyZXNzSW5kZXgud3JpdGVVSW50QkUoMCwgMCwgNClcbiAgICBhbGx5Y2hhaW5BdXRoMS5hZGRBZGRyZXNzSW5kZXgoYWRkcmVzc0luZGV4KVxuICAgIGFkZHJlc3NJbmRleCA9IEJ1ZmZlci5hbGxvYyg0KVxuICAgIGFkZHJlc3NJbmRleC53cml0ZVVJbnRCRSgxLCAwLCA0KVxuICAgIGFsbHljaGFpbkF1dGgxLmFkZEFkZHJlc3NJbmRleChhZGRyZXNzSW5kZXgpXG5cbiAgICBjb25zdCBudW1BZGRyZXNzSW5kaWNlczogbnVtYmVyID0gYWxseWNoYWluQXV0aDEuZ2V0TnVtQWRkcmVzc0luZGljZXMoKVxuICAgIGV4cGVjdChudW1BZGRyZXNzSW5kaWNlcykudG9CZSgyKVxuXG4gICAgY29uc3QgYWRkcmVzc0luZGljZXM6IEJ1ZmZlcltdID0gYWxseWNoYWluQXV0aDEuZ2V0QWRkcmVzc0luZGljZXMoKVxuICAgIGV4cGVjdChCdWZmZXIuaXNCdWZmZXIoYWRkcmVzc0luZGljZXNbMF0pKS50b0JlVHJ1dGh5KClcbiAgICBleHBlY3QoYmludG9vbHMuZnJvbUJ1ZmZlclRvQk4oYWRkcmVzc0luZGljZXNbMF0pLnRvTnVtYmVyKCkpLnRvQmUoMClcbiAgICBleHBlY3QoYmludG9vbHMuZnJvbUJ1ZmZlclRvQk4oYWRkcmVzc0luZGljZXNbMV0pLnRvTnVtYmVyKCkpLnRvQmUoMSlcbiAgfSlcblxuICB0ZXN0KFwidG9CdWZmZXJcIiwgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGFsbHljaGFpbkF1dGgxQnVmOiBCdWZmZXIgPSBhbGx5Y2hhaW5BdXRoMS50b0J1ZmZlcigpXG4gICAgYWxseWNoYWluQXV0aDIuZnJvbUJ1ZmZlcihhbGx5Y2hhaW5BdXRoMUJ1ZilcbiAgICBjb25zdCBhbGx5Y2hhaW5BdXRoMUhleDogc3RyaW5nID0gYWxseWNoYWluQXV0aDEudG9CdWZmZXIoKS50b1N0cmluZyhcImhleFwiKVxuICAgIGNvbnN0IGFsbHljaGFpbkF1dGgySGV4OiBzdHJpbmcgPSBhbGx5Y2hhaW5BdXRoMi50b0J1ZmZlcigpLnRvU3RyaW5nKFwiaGV4XCIpXG4gICAgZXhwZWN0KGFsbHljaGFpbkF1dGgxSGV4KS50b0JlKGFsbHljaGFpbkF1dGgySGV4KVxuICB9KVxufSlcbiJdfQ==