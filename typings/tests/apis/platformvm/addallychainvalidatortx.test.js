"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const bn_js_1 = __importDefault(require("bn.js"));
const buffer_1 = require("buffer/");
const platformvm_1 = require("src/apis/platformvm");
const utils_1 = require("src/utils");
describe("AddAllychainValidatorTx", () => {
    const addAllychainValidatorTxHex = "0000053900000000000000000000000000000000000000000000000000000000000000000000000117cc8b1578ba383544d163958822d8abd3849bb9dfabe39fcbc3e7ee8811fe2f00000007006a94d71389b180000000000000000000000001000000023cb7d3842e8cee6a0ebd09f1fe884f6861e1b29ca43c1f6ecdcb1fcec86d78446b9cf619c64c604b00000001f7fc296b05e7a960e9d2739c1cabdb58f22e5c582e1a7b0877fb10e78cf4e7ec0000000017cc8b1578ba383544d163958822d8abd3849bb9dfabe39fcbc3e7ee8811fe2f00000005006a94d71398f3c00000000100000000000000934d616e75616c6c79206372656174652061204164645375626e657456616c696461746f7254782077686963682063726561746573206120312d6f662d322041564158207574786f20616e64206164647320612076616c696461746f7220746f2061207375626e657420627920636f72726563746c79207369676e696e672074686520322d6f662d33205375626e657441757468de31b4d8b22991d51aa6aa1fc733f23a851a8c94000000006279e79c00000000628d873a00000000000000017fe044f9e97347c0a5ffe5a0f5773b42398c0e2b85948616da681585d460e1a80000000a000000020000000000000001";
    const addAllychainValidatorTxBuf = buffer_1.Buffer.from(addAllychainValidatorTxHex, "hex");
    const addAllychainValidatorTx = new platformvm_1.AddAllychainValidatorTx();
    addAllychainValidatorTx.fromBuffer(addAllychainValidatorTxBuf);
    test("getTypeName", () => __awaiter(void 0, void 0, void 0, function* () {
        const addAllychainValidatorTxTypeName = addAllychainValidatorTx.getTypeName();
        expect(addAllychainValidatorTxTypeName).toBe("AddAllychainValidatorTx");
    }));
    test("getTypeID", () => __awaiter(void 0, void 0, void 0, function* () {
        const addAllychainValidatorTxTypeID = addAllychainValidatorTx.getTypeID();
        expect(addAllychainValidatorTxTypeID).toBe(platformvm_1.PlatformVMConstants.ADDALLYCHAINVALIDATORTX);
    }));
    test("toBuffer and fromBuffer", () => __awaiter(void 0, void 0, void 0, function* () {
        const buf = addAllychainValidatorTx.toBuffer();
        const asvTx = new platformvm_1.AddAllychainValidatorTx();
        asvTx.fromBuffer(buf);
        const buf2 = asvTx.toBuffer();
        expect(buf.toString("hex")).toBe(buf2.toString("hex"));
    }));
    test("getNodeID", () => __awaiter(void 0, void 0, void 0, function* () {
        const nodeID = "NodeID-MFrZFVCXPv5iCn6M9K6XduxGTYp891xXZ";
        const nodeIDBuf = addAllychainValidatorTx.getNodeID();
        const nID = (0, utils_1.bufferToNodeIDString)(nodeIDBuf);
        expect(nID).toBe(nodeID);
    }));
    test("getStartTime", () => __awaiter(void 0, void 0, void 0, function* () {
        const startTime = new bn_js_1.default(1652156316);
        const st = addAllychainValidatorTx.getStartTime();
        expect(startTime.toString()).toBe(st.toString());
    }));
    test("getEndTime", () => __awaiter(void 0, void 0, void 0, function* () {
        const endTime = new bn_js_1.default(1653442362);
        const et = addAllychainValidatorTx.getEndTime();
        expect(endTime.toString()).toBe(et.toString());
    }));
    test("getWeight", () => __awaiter(void 0, void 0, void 0, function* () {
        const weight = new bn_js_1.default(1);
        const w = addAllychainValidatorTx.getWeight();
        expect(weight.toString()).toBe(w.toString());
    }));
    test("getAllychainID", () => __awaiter(void 0, void 0, void 0, function* () {
        const allychainID = "yKRV4EvGYWj7HHXUxSYzaAQVazEvaFPKPhJie4paqbrML5dub";
        const sID = addAllychainValidatorTx.getAllychainID();
        expect(allychainID).toBe(sID);
    }));
    describe("AllychainAuth", () => {
        const sa = addAllychainValidatorTx.getAllychainAuth();
        test("getTypeName", () => __awaiter(void 0, void 0, void 0, function* () {
            const allychainAuthTypeName = sa.getTypeName();
            expect(allychainAuthTypeName).toBe("AllychainAuth");
        }));
        test("getTypeID", () => __awaiter(void 0, void 0, void 0, function* () {
            const allychainAuthTypeID = sa.getTypeID();
            expect(allychainAuthTypeID).toBe(platformvm_1.PlatformVMConstants.ALLYCHAINAUTH);
        }));
        test("getNumAddressIndices", () => __awaiter(void 0, void 0, void 0, function* () {
            const numAddressIndices = sa.getNumAddressIndices();
            const nAI = 2;
            expect(numAddressIndices).toBe(nAI);
        }));
        test("addressIndices", () => __awaiter(void 0, void 0, void 0, function* () {
            const ai = [0, 1];
            const addressIndices = sa.getAddressIndices();
            addressIndices.forEach((addressIndex, index) => {
                expect(addressIndex.readInt32BE(0)).toBe(ai[index]);
            });
        }));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkYWxseWNoYWludmFsaWRhdG9ydHgudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3RzL2FwaXMvcGxhdGZvcm12bS9hZGRhbGx5Y2hhaW52YWxpZGF0b3J0eC50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsa0RBQXNCO0FBQ3RCLG9DQUFnQztBQUNoQyxvREFJNEI7QUFDNUIscUNBQWdEO0FBRWhELFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxHQUFTLEVBQUU7SUFDN0MsTUFBTSwwQkFBMEIsR0FDOUIsdzdCQUF3N0IsQ0FBQTtJQUMxN0IsTUFBTSwwQkFBMEIsR0FBVyxlQUFNLENBQUMsSUFBSSxDQUNwRCwwQkFBMEIsRUFDMUIsS0FBSyxDQUNOLENBQUE7SUFDRCxNQUFNLHVCQUF1QixHQUMzQixJQUFJLG9DQUF1QixFQUFFLENBQUE7SUFDL0IsdUJBQXVCLENBQUMsVUFBVSxDQUFDLDBCQUEwQixDQUFDLENBQUE7SUFFOUQsSUFBSSxDQUFDLGFBQWEsRUFBRSxHQUF3QixFQUFFO1FBQzVDLE1BQU0sK0JBQStCLEdBQ25DLHVCQUF1QixDQUFDLFdBQVcsRUFBRSxDQUFBO1FBQ3ZDLE1BQU0sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO0lBQ3pFLENBQUMsQ0FBQSxDQUFDLENBQUE7SUFFRixJQUFJLENBQUMsV0FBVyxFQUFFLEdBQXdCLEVBQUU7UUFDMUMsTUFBTSw2QkFBNkIsR0FDakMsdUJBQXVCLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDckMsTUFBTSxDQUFDLDZCQUE2QixDQUFDLENBQUMsSUFBSSxDQUN4QyxnQ0FBbUIsQ0FBQyx1QkFBdUIsQ0FDNUMsQ0FBQTtJQUNILENBQUMsQ0FBQSxDQUFDLENBQUE7SUFFRixJQUFJLENBQUMseUJBQXlCLEVBQUUsR0FBd0IsRUFBRTtRQUN4RCxNQUFNLEdBQUcsR0FBVyx1QkFB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QUFDLFNBQVMsRUFBRSxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQ0FBbUIsQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUNyRSxDQUFDLENBQUEsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLHNCQUFzQixFQUFFLEdBQXdCLEVBQUU7WUFDckQsTUFBTSxpQkFBaUIsR0FBVyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQTtZQUMzRCxNQUFNLEdBQUcsR0FBVyxDQUFDLENBQUE7WUFDckIsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3JDLENBQUMsQ0FBQSxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBd0IsRUFBRTtZQUMvQyxNQUFNLEVBQUUsR0FBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUMzQixNQUFNLGNBQWMsR0FBYSxFQUFFLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtZQUN2RCxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsWUFBb0IsRUFBRSxLQUFhLEVBQUUsRUFBRTtnQkFDN0QsTUFBTSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7WUFDckQsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUEsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCTiBmcm9tIFwiYm4uanNcIlxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcImJ1ZmZlci9cIlxuaW1wb3J0IHtcbiAgQWRkQWxseWNoYWluVmFsaWRhdG9yVHgsXG4gIFBsYXRmb3JtVk1Db25zdGFudHMsXG4gIEFsbHljaGFpbkF1dGhcbn0gZnJvbSBcInNyYy9hcGlzL3BsYXRmb3Jtdm1cIlxuaW1wb3J0IHsgYnVmZmVyVG9Ob2RlSURTdHJpbmcgfSBmcm9tIFwic3JjL3V0aWxzXCJcblxuZGVzY3JpYmUoXCJBZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeFwiLCAoKTogdm9pZCA9PiB7XG4gIGNvbnN0IGFkZEFsbHljaGFpblZhbGlkYXRvclR4SGV4OiBzdHJpbmcgPVxuICAgIFwiMDAwMDA1MzkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDExN2NjOGIxNTc4YmEzODM1NDRkMTYzOTU4ODIyZDhhYmQzODQ5YmI5ZGZhYmUzOWZjYmMzZTdlZTg4MTFmZTJmMDAwMDAwMDcwMDZhOTRkNzEzODliMTgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDIzY2I3ZDM4NDJlOGNlZTZhMGViZDA5ZjFmZTg4NGY2ODYxZTFiMjljYTQzYzFmNmVjZGNiMWZjZWM4NmQ3ODQ0NmI5Y2Y2MTljNjRjNjA0YjAwMDAwMDAxZjdmYzI5NmIwNWU3YTk2MGU5ZDI3MzljMWNhYmRiNThmMjJlNWM1ODJlMWE3YjA4NzdmYjEwZTc4Y2Y0ZTdlYzAwMDAwMDAwMTdjYzhiMTU3OGJhMzgzNTQ0ZDE2Mzk1ODgyMmQ4YWJkMzg0OWJiOWRmYWJlMzlmY2JjM2U3ZWU4ODExZmUyZjAwMDAwMDA1MDA2YTk0ZDcxMzk4ZjNjMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDA5MzRkNjE2ZTc1NjE2YzZjNzkyMDYzNzI2NTYxNzQ2NTIwNjEyMDQxNjQ2NDUzNzU2MjZlNjU3NDU2NjE2YzY5NjQ2MTc0NmY3MjU0NzgyMDc3Njg2OTYzNjgyMDYzNzI2NTYxNzQ2NTczMjA2MTIwMzEyZDZmNjYyZDMyMjA0MTU2NDE1ODIwNzU3NDc4NmYyMDYxNmU2NDIwNjE2NDY0NzMyMDYxMjA3NjYxNmM2OTY0NjE3NDZmNzIyMDc0NmYyMDYxMjA3Mzc1NjI2ZTY1NzQyMDYyNzkyMDYzNmY3MjcyNjU2Mzc0NmM3OTIwNzM2OTY3NmU2OTZlNjcyMDc0Njg2NTIwMzIyZDZmNjYyZDMzMjA1Mzc1NjI2ZTY1NzQ0MTc1NzQ2OGRlMzFiNGQ4YjIyOTkxZDUxYWE2YWExZmM3MzNmMjNhODUxYThjOTQwMDAwMDAwMDYyNzllNzljMDAwMDAwMDA2MjhkODczYTAwMDAwMDAwMDAwMDAwMDE3ZmUwNDRmOWU5NzM0N2MwYTVmZmU1YTBmNTc3M2I0MjM5OGMwZTJiODU5NDg2MTZkYTY4MTU4NWQ0NjBlMWE4MDAwMDAwMGEwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDFcIlxuICBjb25zdCBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeEJ1ZjogQnVmZmVyID0gQnVmZmVyLmZyb20oXG4gICAgYWRkQWxseWNoYWluVmFsaWRhdG9yVHhIZXgsXG4gICAgXCJoZXhcIlxuICApXG4gIGNvbnN0IGFkZEFsbHljaGFpblZhbGlkYXRvclR4OiBBZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeCA9XG4gICAgbmV3IEFkZEFsbHljaGFpblZhbGlkYXRvclR4KClcbiAgYWRkQWxseWNoYWluVmFsaWRhdG9yVHguZnJvbUJ1ZmZlcihhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeEJ1ZilcblxuICB0ZXN0KFwiZ2V0VHlwZU5hbWVcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGNvbnN0IGFkZEFsbHljaGFpblZhbGlkYXRvclR4VHlwZU5hbWU6IHN0cmluZyA9XG4gICAgICBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeC5nZXRUeXBlTmFtZSgpXG4gICAgZXhwZWN0KGFkZEFsbHljaGFpblZhbGlkYXRvclR4VHlwZU5hbWUpLnRvQmUoXCJBZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeFwiKVxuICB9KVxuXG4gIHRlc3QoXCJnZXRUeXBlSURcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGNvbnN0IGFkZEFsbHljaGFpblZhbGlkYXRvclR4VHlwZUlEOiBudW1iZXIgPVxuICAgICAgYWRkQWxseWNoYWluVmFsaWRhdG9yVHguZ2V0VHlwZUlEKClcbiAgICBleHBlY3QoYWRkQWxseWNoYWluVmFsaWRhdG9yVHhUeXBlSUQpLnRvQmUoXG4gICAgICBQbGF0Zm9ybVZNQ29uc3RhbnRzLkFEREFMTFlDSEFJTlZBTElEQVRPUlRYXG4gICAgKVxuICB9KVxuXG4gIHRlc3QoXCJ0b0J1ZmZlciBhbmQgZnJvbUJ1ZmZlclwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgY29uc3QgYnVmOiBCdWZmZXIgPSBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeC50b0J1ZmZlcigpXG4gICAgY29uc3QgYXN2VHg6IEFkZEFsbHljaGFpblZhbGlkYXRvclR4ID0gbmV3IEFkZEFsbHljaGFpblZhbGlkYXRvclR4KClcbiAgICBhc3ZUeC5mcm9tQnVmZmVyKGJ1ZilcbiAgICBjb25zdCBidWYyOiBCdWZmZXIgPSBhc3ZUeC50b0J1ZmZlcigpXG4gICAgZXhwZWN0KGJ1Zi50b1N0cmluZyhcImhleFwiKSkudG9CZShidWYyLnRvU3RyaW5nKFwiaGV4XCIpKVxuICB9KVxuXG4gIHRlc3QoXCJnZXROb2RlSURcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGNvbnN0IG5vZGVJRDogc3RyaW5nID0gXCJOb2RlSUQtTUZyWkZWQ1hQdjVpQ242TTlLNlhkdXhHVFlwODkxeFhaXCJcbiAgICBjb25zdCBub2RlSURCdWY6IEJ1ZmZlciA9IGFkZEFsbHljaGFpblZhbGlkYXRvclR4LmdldE5vZGVJRCgpXG4gICAgY29uc3QgbklEOiBzdHJpbmcgPSBidWZmZXJUb05vZGVJRFN0cmluZyhub2RlSURCdWYpXG4gICAgZXhwZWN0KG5JRCkudG9CZShub2RlSUQpXG4gIH0pXG5cbiAgdGVzdChcImdldFN0YXJ0VGltZVwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lOiBCTiA9IG5ldyBCTigxNjUyMTU2MzE2KVxuICAgIGNvbnN0IHN0OiBCTiA9IGFkZEFsbHljaGFpblZhbGlkYXRvclR4LmdldFN0YXJ0VGltZSgpXG4gICAgZXhwZWN0KHN0YXJ0VGltZS50b1N0cmluZygpKS50b0JlKHN0LnRvU3RyaW5nKCkpXG4gIH0pXG5cbiAgdGVzdChcImdldEVuZFRpbWVcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGNvbnN0IGVuZFRpbWU6IEJOID0gbmV3IEJOKDE2NTM0NDIzNjIpXG4gICAgY29uc3QgZXQ6IEJOID0gYWRkQWxseWNoYWluVmFsaWRhdG9yVHguZ2V0RW5kVGltZSgpXG4gICAgZXhwZWN0KGVuZFRpbWUudG9TdHJpbmcoKSkudG9CZShldC50b1N0cmluZygpKVxuICB9KVxuXG4gIHRlc3QoXCJnZXRXZWlnaHRcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGNvbnN0IHdlaWdodDogQk4gPSBuZXcgQk4oMSlcbiAgICBjb25zdCB3OiBCTiA9IGFkZEFsbHljaGFpblZhbGlkYXRvclR4LmdldFdlaWdodCgpXG4gICAgZXhwZWN0KHdlaWdodC50b1N0cmluZygpKS50b0JlKHcudG9TdHJpbmcoKSlcbiAgfSlcblxuICB0ZXN0KFwiZ2V0QWxseWNoYWluSURcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGNvbnN0IGFsbHljaGFpbklEOiBzdHJpbmcgPVxuICAgICAgXCJ5S1JWNEV2R1lXajdISFhVeFNZemFBUVZhekV2YUZQS1BoSmllNHBhcWJyTUw1ZHViXCJcbiAgICBjb25zdCBzSUQ6IHN0cmluZyA9IGFkZEFsbHljaGFpblZhbGlkYXRvclR4LmdldEFsbHljaGFpbklEKClcbiAgICBleHBlY3QoYWxseWNoYWluSUQpLnRvQmUoc0lEKVxuICB9KVxuXG4gIGRlc2NyaWJlKFwiQWxseWNoYWluQXV0aFwiLCAoKTogdm9pZCA9PiB7XG4gICAgY29uc3Qgc2E6IEFsbHljaGFpbkF1dGggPSBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeC5nZXRBbGx5Y2hhaW5BdXRoKClcblxuICAgIHRlc3QoXCJnZXRUeXBlTmFtZVwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICBjb25zdCBhbGx5Y2hhaW5BdXRoVHlwZU5hbWU6IHN0cmluZyA9IHNhLmdldFR5cGVOYW1lKClcbiAgICAgIGV4cGVjdChhbGx5Y2hhaW5BdXRoVHlwZU5hbWUpLnRvQmUoXCJBbGx5Y2hhaW5BdXRoXCIpXG4gICAgfSlcblxuICAgIHRlc3QoXCJnZXRUeXBlSURcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgY29uc3QgYWxseWNoYWluQXV0aFR5cGVJRDogbnVtYmVyID0gc2EuZ2V0VHlwZUlEKClcbiAgICAgIGV4cGVjdChhbGx5Y2hhaW5BdXRoVHlwZUlEKS50b0JlKFBsYXRmb3JtVk1Db25zdGFudHMuQUxMWUNIQUlOQVVUSClcbiAgICB9KVxuXG4gICAgdGVzdChcImdldE51bUFkZHJlc3NJbmRpY2VzXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGNvbnN0IG51bUFkZHJlc3NJbmRpY2VzOiBudW1iZXIgPSBzYS5nZXROdW1BZGRyZXNzSW5kaWNlcygpXG4gICAgICBjb25zdCBuQUk6IG51bWJlciA9IDJcbiAgICAgIGV4cGVjdChudW1BZGRyZXNzSW5kaWNlcykudG9CZShuQUkpXG4gICAgfSlcblxuICAgIHRlc3QoXCJhZGRyZXNzSW5kaWNlc1wiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICBjb25zdCBhaTogbnVtYmVyW10gPSBbMCwgMV1cbiAgICAgIGNvbnN0IGFkZHJlc3NJbmRpY2VzOiBCdWZmZXJbXSA9IHNhLmdldEFkZHJlc3NJbmRpY2VzKClcbiAgICAgIGFkZHJlc3NJbmRpY2VzLmZvckVhY2goKGFkZHJlc3NJbmRleDogQnVmZmVyLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGV4cGVjdChhZGRyZXNzSW5kZXgucmVhZEludDMyQkUoMCkpLnRvQmUoYWlbaW5kZXhdKVxuICAgICAgfSlcbiAgICB9KVxuICB9KVxufSlcbiJdfQ==