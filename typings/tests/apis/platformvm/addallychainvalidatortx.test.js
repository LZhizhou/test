"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const bn_js_1 = __importDefault(require("bn.js"));
const buffer_1 = require("buffer/");
const platformvm_1 = require("src/apis/platformvm");
const utils_1 = require("src/utils");
describe("AddAllychainValidatorTx", () => {
    const addAllychainValidatorTxHex = "0000053900000000000000000000000000000000000000000000000000000000000000000000000117cc8b1578ba383544d163958822d8abd3849bb9dfabe39fcbc3e7ee8811fe2f00000007006a94d71389b180000000000000000000000001000000023cb7d3842e8cee6a0ebd09f1fe884f6861e1b29ca43c1f6ecdcb1fcec86d78446b9cf619c64c604b00000001f7fc296b05e7a960e9d2739c1cabdb58f22e5c582e1a7b0877fb10e78cf4e7ec0000000017cc8b1578ba383544d163958822d8abd3849bb9dfabe39fcbc3e7ee8811fe2f00000005006a94d71398f3c00000000100000000000000934d616e75616c6c79206372656174652061204164645375626e657456616c696461746f7254782077686963682063726561746573206120312d6f662d322041564158207574786f20616e64206164647320612076616c696461746f7220746f2061207375626e657420627920636f72726563746c79207369676e696e672074686520322d6f662d33205375626e657441757468de31b4d8b22991d51aa6aa1fc733f23a851a8c94000000006279e79c00000000628d873a00000000000000017fe044f9e97347c0a5ffe5a0f5773b42398c0e2b85948616da681585d460e1a80000000a000000020000000000000001";
    const addAllychainValidatorTxBuf = buffer_1.Buffer.from(addAllychainValidatorTxHex, "hex");
    const addAllychainValidatorTx = new platformvm_1.AddAllychainValidatorTx();
    addAllychainValidatorTx.fromBuffer(addAllychainValidatorTxBuf);
    test("getTypeName", () => __awaiter(void 0, void 0, void 0, function* () {
        const addAllychainValidatorTxTypeName = addAllychainValidatorTx.getTypeName();
        expect(addAllychainValidatorTxTypeName).toBe("AddAllychainValidatorTx");
    }));
    test("getTypeID", () => __awaiter(void 0, void 0, void 0, function* () {
        const addAllychainValidatorTxTypeID = addAllychainValidatorTx.getTypeID();
        expect(addAllychainValidatorTxTypeID).toBe(platformvm_1.PlatformVMConstants.ADDALLYCHAINVALIDATORTX);
    }));
    test("toBuffer and fromBuffer", () => __awaiter(void 0, void 0, void 0, function* () {
        const buf = addAllychainValidatorTx.toBuffer();
        const asvTx = new platformvm_1.AddAllychainValidatorTx();
        asvTx.fromBuffer(buf);
        const buf2 = asvTx.toBuffer();
        expect(buf.toString("hex")).toBe(buf2.toString("hex"));
    }));
    test("getNodeID", () => __awaiter(void 0, void 0, void 0, function* () {
        const nodeID = "NodeID-MFrZFVCXPv5iCn6M9K6XduxGTYp891xXZ";
        const nodeIDBuf = addAllychainValidatorTx.getNodeID();
        const nID = (0, utils_1.bufferToNodeIDString)(nodeIDBuf);
        expect(nID).toBe(nodeID);
    }));
    test("getStartTime", () => __awaiter(void 0, void 0, void 0, function* () {
        const startTime = new bn_js_1.default(1652156316);
        const st = addAllychainValidatorTx.getStartTime();
        expect(startTime.toString()).toBe(st.toString());
    }));
    test("getEndTime", () => __awaiter(void 0, void 0, void 0, function* () {
        const endTime = new bn_js_1.default(1653442362);
        const et = addAllychainValidatorTx.getEndTime();
        expect(endTime.toString()).toBe(et.toString());
    }));
    test("getWeight", () => __awaiter(void 0, void 0, void 0, function* () {
        const weight = new bn_js_1.default(1);
        const w = addAllychainValidatorTx.getWeight();
        expect(weight.toString()).toBe(w.toString());
    }));
    test("getAllychainID", () => __awaiter(void 0, void 0, void 0, function* () {
        const allychainID = "yKRV4EvGYWj7HHXUxSYzaAQVazEvaFPKPhJie4paqbrML5dub";
        const sID = addAllychainValidatorTx.getAllychainID();
        expect(allychainID).toBe(sID);
    }));
    describe("AllychainAuth", () => {
        const sa = addAllychainValidatorTx.getAllychainAuth();
        test("getTypeName", () => __awaiter(void 0, void 0, void 0, function* () {
            const allychainAuthTypeName = sa.getTypeName();
            expect(allychainAuthTypeName).toBe("AllychainAuth");
        }));
        test("getTypeID", () => __awaiter(void 0, void 0, void 0, function* () {
            const allychainAuthTypeID = sa.getTypeID();
            expect(allychainAuthTypeID).toBe(platformvm_1.PlatformVMConstants.ALLYCHAINAUTH);
        }));
        test("getNumAddressIndices", () => __awaiter(void 0, void 0, void 0, function* () {
            const numAddressIndices = sa.getNumAddressIndices();
            const nAI = 2;
            expect(numAddressIndices).toBe(nAI);
        }));
        test("addressIndices", () => __awaiter(void 0, void 0, void 0, function* () {
            const ai = [0, 1];
            const addressIndices = sa.getAddressIndices();
            addressIndices.forEach((addressIndex, index) => {
                expect(addressIndex.readInt32BE(0)).toBe(ai[index]);
            });
        }));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkYWxseWNoYWludmFsaWRhdG9ydHgudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3RzL2FwaXMvcGxhdGZvcm12bS9hZGRhbGx5Y2hhaW52YWxpZGF0b3J0eC50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsa0RBQXNCO0FBQ3RCLG9DQUFnQztBQUNoQyxvREFJNEI7QUFDNUIscUNBQWdEO0FBRWhELFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxHQUFTLEVBQUU7SUFDN0MsTUFBTSwwQkFBMEIsR0FDOUIsdzdCQUF3N0IsQ0FBQTtJQUMxN0IsTUFBTSwwQkFBMEIsR0FBVyxlQUFNLENBQUMsSUFBSSxDQUNwRCwwQkFBMEIsRUFDMUIsS0FBSyxDQUNOLENBQUE7SUFDRCxNQUFNLHVCQUF1QixHQUMzQixJQUFJLG9DQUF1QixFQUFFLENBQUE7SUFDL0IsdUJBQXVCLENBQUMsVUFBVSxDQUFDLDBCQUEwQixDQUFDLENBQUE7SUFFOUQsSUFBSSxDQUFDLGFBQWEsRUFBRSxHQUF3QixFQUFFO1FBQzVDLE1BQU0sK0JBQStCLEdBQ25DLHVCQUF1QixDQUFDLFdBQVcsRUFBRSxDQUFBO1FBQ3ZDLE1BQU0sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO0lBQ3pFLENBQUMsQ0FBQSxDQUFDLENBQUE7SUFFRixJQUFJLENBQUMsV0FBVyxFQUFFLEdBQXdCLEVBQUU7UUFDMUMsTUFBTSw2QkFBNkIsR0FDakMsdUJBQXVCLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDckMsTUFBTSxDQUFDLDZCQUE2QixDQUFDLENBQUMsSUFBSSxDQUN4QyxnQ0FBbUIsQ0FBQyx1QkFBdUIsQ0FDNUMsQ0FBQTtJQUNILENBQUMsQ0FBQSxDQUFDLENBQUE7SUFFRixJQUFJLENBQUMseUJBQXlCLEVBQUUsR0FBd0IsRUFBRTtRQUN4RCxNQUFNLEdBQUcsR0FBVyx1QkFB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QUFDLFNBQVMsRUFBRSxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQ0FBbUIsQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUNyRSxDQUFDLENBQUEsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLHNCQUFzQixFQUFFLEdBQXdCLEVBQUU7WUFDckQsTUFBTSxpQkFBaUIsR0FBVyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQTtZQUMzRCxNQUFNLEdBQUcsR0FBVyxDQUFDLENBQUE7WUFDckIsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3JDLENBQUMsQ0FBQSxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBd0IsRUFBRTtZQUMvQyxNQUFNLEVBQUUsR0FBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUMzQixNQUFNLGNBQWMsR0FBYSxFQUFFLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtZQUN2RCxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsWUFBb0IsRUFBRSxLQUFhLEVBQUUsRUFBRTtnQkFDN0QsTUFBTSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7WUFDckQsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUEsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCTiBmcm9tIFwiYm4uanNcIlxyXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiYnVmZmVyL1wiXHJcbmltcG9ydCB7XHJcbiAgQWRkQWxseWNoYWluVmFsaWRhdG9yVHgsXHJcbiAgUGxhdGZvcm1WTUNvbnN0YW50cyxcclxuICBBbGx5Y2hhaW5BdXRoXHJcbn0gZnJvbSBcInNyYy9hcGlzL3BsYXRmb3Jtdm1cIlxyXG5pbXBvcnQgeyBidWZmZXJUb05vZGVJRFN0cmluZyB9IGZyb20gXCJzcmMvdXRpbHNcIlxyXG5cclxuZGVzY3JpYmUoXCJBZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeFwiLCAoKTogdm9pZCA9PiB7XHJcbiAgY29uc3QgYWRkQWxseWNoYWluVmFsaWRhdG9yVHhIZXg6IHN0cmluZyA9XHJcbiAgICBcIjAwMDAwNTM5MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTdjYzhiMTU3OGJhMzgzNTQ0ZDE2Mzk1ODgyMmQ4YWJkMzg0OWJiOWRmYWJlMzlmY2JjM2U3ZWU4ODExZmUyZjAwMDAwMDA3MDA2YTk0ZDcxMzg5YjE4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAyM2NiN2QzODQyZThjZWU2YTBlYmQwOWYxZmU4ODRmNjg2MWUxYjI5Y2E0M2MxZjZlY2RjYjFmY2VjODZkNzg0NDZiOWNmNjE5YzY0YzYwNGIwMDAwMDAwMWY3ZmMyOTZiMDVlN2E5NjBlOWQyNzM5YzFjYWJkYjU4ZjIyZTVjNTgyZTFhN2IwODc3ZmIxMGU3OGNmNGU3ZWMwMDAwMDAwMDE3Y2M4YjE1NzhiYTM4MzU0NGQxNjM5NTg4MjJkOGFiZDM4NDliYjlkZmFiZTM5ZmNiYzNlN2VlODgxMWZlMmYwMDAwMDAwNTAwNmE5NGQ3MTM5OGYzYzAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwOTM0ZDYxNmU3NTYxNmM2Yzc5MjA2MzcyNjU2MTc0NjUyMDYxMjA0MTY0NjQ1Mzc1NjI2ZTY1NzQ1NjYxNmM2OTY0NjE3NDZmNzI1NDc4MjA3NzY4Njk2MzY4MjA2MzcyNjU2MTc0NjU3MzIwNjEyMDMxMmQ2ZjY2MmQzMjIwNDE1NjQxNTgyMDc1NzQ3ODZmMjA2MTZlNjQyMDYxNjQ2NDczMjA2MTIwNzY2MTZjNjk2NDYxNzQ2ZjcyMjA3NDZmMjA2MTIwNzM3NTYyNmU2NTc0MjA2Mjc5MjA2MzZmNzI3MjY1NjM3NDZjNzkyMDczNjk2NzZlNjk2ZTY3MjA3NDY4NjUyMDMyMmQ2ZjY2MmQzMzIwNTM3NTYyNmU2NTc0NDE3NTc0NjhkZTMxYjRkOGIyMjk5MWQ1MWFhNmFhMWZjNzMzZjIzYTg1MWE4Yzk0MDAwMDAwMDA2Mjc5ZTc5YzAwMDAwMDAwNjI4ZDg3M2EwMDAwMDAwMDAwMDAwMDAxN2ZlMDQ0ZjllOTczNDdjMGE1ZmZlNWEwZjU3NzNiNDIzOThjMGUyYjg1OTQ4NjE2ZGE2ODE1ODVkNDYwZTFhODAwMDAwMDBhMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAxXCJcclxuICBjb25zdCBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeEJ1ZjogQnVmZmVyID0gQnVmZmVyLmZyb20oXHJcbiAgICBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeEhleCxcclxuICAgIFwiaGV4XCJcclxuICApXHJcbiAgY29uc3QgYWRkQWxseWNoYWluVmFsaWRhdG9yVHg6IEFkZEFsbHljaGFpblZhbGlkYXRvclR4ID1cclxuICAgIG5ldyBBZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeCgpXHJcbiAgYWRkQWxseWNoYWluVmFsaWRhdG9yVHguZnJvbUJ1ZmZlcihhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeEJ1ZilcclxuXHJcbiAgdGVzdChcImdldFR5cGVOYW1lXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGNvbnN0IGFkZEFsbHljaGFpblZhbGlkYXRvclR4VHlwZU5hbWU6IHN0cmluZyA9XHJcbiAgICAgIGFkZEFsbHljaGFpblZhbGlkYXRvclR4LmdldFR5cGVOYW1lKClcclxuICAgIGV4cGVjdChhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeFR5cGVOYW1lKS50b0JlKFwiQWRkQWxseWNoYWluVmFsaWRhdG9yVHhcIilcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiZ2V0VHlwZUlEXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGNvbnN0IGFkZEFsbHljaGFpblZhbGlkYXRvclR4VHlwZUlEOiBudW1iZXIgPVxyXG4gICAgICBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeC5nZXRUeXBlSUQoKVxyXG4gICAgZXhwZWN0KGFkZEFsbHljaGFpblZhbGlkYXRvclR4VHlwZUlEKS50b0JlKFxyXG4gICAgICBQbGF0Zm9ybVZNQ29uc3RhbnRzLkFEREFMTFlDSEFJTlZBTElEQVRPUlRYXHJcbiAgICApXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcInRvQnVmZmVyIGFuZCBmcm9tQnVmZmVyXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGNvbnN0IGJ1ZjogQnVmZmVyID0gYWRkQWxseWNoYWluVmFsaWRhdG9yVHgudG9CdWZmZXIoKVxyXG4gICAgY29uc3QgYXN2VHg6IEFkZEFsbHljaGFpblZhbGlkYXRvclR4ID0gbmV3IEFkZEFsbHljaGFpblZhbGlkYXRvclR4KClcclxuICAgIGFzdlR4LmZyb21CdWZmZXIoYnVmKVxyXG4gICAgY29uc3QgYnVmMjogQnVmZmVyID0gYXN2VHgudG9CdWZmZXIoKVxyXG4gICAgZXhwZWN0KGJ1Zi50b1N0cmluZyhcImhleFwiKSkudG9CZShidWYyLnRvU3RyaW5nKFwiaGV4XCIpKVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJnZXROb2RlSURcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgY29uc3Qgbm9kZUlEOiBzdHJpbmcgPSBcIk5vZGVJRC1NRnJaRlZDWFB2NWlDbjZNOUs2WGR1eEdUWXA4OTF4WFpcIlxyXG4gICAgY29uc3Qgbm9kZUlEQnVmOiBCdWZmZXIgPSBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeC5nZXROb2RlSUQoKVxyXG4gICAgY29uc3QgbklEOiBzdHJpbmcgPSBidWZmZXJUb05vZGVJRFN0cmluZyhub2RlSURCdWYpXHJcbiAgICBleHBlY3QobklEKS50b0JlKG5vZGVJRClcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiZ2V0U3RhcnRUaW1lXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZTogQk4gPSBuZXcgQk4oMTY1MjE1NjMxNilcclxuICAgIGNvbnN0IHN0OiBCTiA9IGFkZEFsbHljaGFpblZhbGlkYXRvclR4LmdldFN0YXJ0VGltZSgpXHJcbiAgICBleHBlY3Qoc3RhcnRUaW1lLnRvU3RyaW5nKCkpLnRvQmUoc3QudG9TdHJpbmcoKSlcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiZ2V0RW5kVGltZVwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBjb25zdCBlbmRUaW1lOiBCTiA9IG5ldyBCTigxNjUzNDQyMzYyKVxyXG4gICAgY29uc3QgZXQ6IEJOID0gYWRkQWxseWNoYWluVmFsaWRhdG9yVHguZ2V0RW5kVGltZSgpXHJcbiAgICBleHBlY3QoZW5kVGltZS50b1N0cmluZygpKS50b0JlKGV0LnRvU3RyaW5nKCkpXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcImdldFdlaWdodFwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBjb25zdCB3ZWlnaHQ6IEJOID0gbmV3IEJOKDEpXHJcbiAgICBjb25zdCB3OiBCTiA9IGFkZEFsbHljaGFpblZhbGlkYXRvclR4LmdldFdlaWdodCgpXHJcbiAgICBleHBlY3Qod2VpZ2h0LnRvU3RyaW5nKCkpLnRvQmUody50b1N0cmluZygpKVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJnZXRBbGx5Y2hhaW5JRFwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBjb25zdCBhbGx5Y2hhaW5JRDogc3RyaW5nID1cclxuICAgICAgXCJ5S1JWNEV2R1lXajdISFhVeFNZemFBUVZhekV2YUZQS1BoSmllNHBhcWJyTUw1ZHViXCJcclxuICAgIGNvbnN0IHNJRDogc3RyaW5nID0gYWRkQWxseWNoYWluVmFsaWRhdG9yVHguZ2V0QWxseWNoYWluSUQoKVxyXG4gICAgZXhwZWN0KGFsbHljaGFpbklEKS50b0JlKHNJRClcclxuICB9KVxyXG5cclxuICBkZXNjcmliZShcIkFsbHljaGFpbkF1dGhcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3Qgc2E6IEFsbHljaGFpbkF1dGggPSBhZGRBbGx5Y2hhaW5WYWxpZGF0b3JUeC5nZXRBbGx5Y2hhaW5BdXRoKClcclxuXHJcbiAgICB0ZXN0KFwiZ2V0VHlwZU5hbWVcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgICBjb25zdCBhbGx5Y2hhaW5BdXRoVHlwZU5hbWU6IHN0cmluZyA9IHNhLmdldFR5cGVOYW1lKClcclxuICAgICAgZXhwZWN0KGFsbHljaGFpbkF1dGhUeXBlTmFtZSkudG9CZShcIkFsbHljaGFpbkF1dGhcIilcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdChcImdldFR5cGVJRFwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgIGNvbnN0IGFsbHljaGFpbkF1dGhUeXBlSUQ6IG51bWJlciA9IHNhLmdldFR5cGVJRCgpXHJcbiAgICAgIGV4cGVjdChhbGx5Y2hhaW5BdXRoVHlwZUlEKS50b0JlKFBsYXRmb3JtVk1Db25zdGFudHMuQUxMWUNIQUlOQVVUSClcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdChcImdldE51bUFkZHJlc3NJbmRpY2VzXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgY29uc3QgbnVtQWRkcmVzc0luZGljZXM6IG51bWJlciA9IHNhLmdldE51bUFkZHJlc3NJbmRpY2VzKClcclxuICAgICAgY29uc3QgbkFJOiBudW1iZXIgPSAyXHJcbiAgICAgIGV4cGVjdChudW1BZGRyZXNzSW5kaWNlcykudG9CZShuQUkpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoXCJhZGRyZXNzSW5kaWNlc1wiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgIGNvbnN0IGFpOiBudW1iZXJbXSA9IFswLCAxXVxyXG4gICAgICBjb25zdCBhZGRyZXNzSW5kaWNlczogQnVmZmVyW10gPSBzYS5nZXRBZGRyZXNzSW5kaWNlcygpXHJcbiAgICAgIGFkZHJlc3NJbmRpY2VzLmZvckVhY2goKGFkZHJlc3NJbmRleDogQnVmZmVyLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGFkZHJlc3NJbmRleC5yZWFkSW50MzJCRSgwKSkudG9CZShhaVtpbmRleF0pXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0pXHJcbn0pXHJcbiJdfQ==