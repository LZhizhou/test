"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const bintools_1 = __importDefault(require("../../../src/utils/bintools"));
const buffer_1 = require("buffer/");
const constants_1 = require("../../../src/apis/platformvm/constants");
const index_1 = require("../../../src/index");
const platformvm_1 = require("src/apis/platformvm");
describe("CreateChainTx", () => {
    /**
     * @ignore
     */
    const bintools = bintools_1.default.getInstance();
    const createChainTxHex = "0000053900000000000000000000000000000000000000000000000000000000000000000000000117cc8b1578ba383544d163958822d8abd3849bb9dfabe39fcbc3e7ee8811fe2f00000007006a94d6d80d6c00000000000000000000000001000000023cb7d3842e8cee6a0ebd09f1fe884f6861e1b29ca43c1f6ecdcb1fcec86d78446b9cf619c64c604b000000017fe044f9e97347c0a5ffe5a0f5773b42398c0e2b85948616da681585d460e1a80000000017cc8b1578ba383544d163958822d8abd3849bb9dfabe39fcbc3e7ee8811fe2f00000005006a94d713a836000000000100000000000000934d616e75616c6c7920637265617465206120437265617465436861696e54782077686963682063726561746573206120312d6f662d322041564158207574786f20616e6420696e7374616e746961746573206120564d20696e746f206120626c6f636b636861696e20627920636f72726563746c79207369676e696e672074686520322d6f662d33205375626e6574417574687fe044f9e97347c0a5ffe5a0f5773b42398c0e2b85948616da681585d460e1a80008455049432041564d61766d0000000000000000000000000000000000000000000000000000000000000000036e6674667800000000000000000000000000000000000000000000000000000070726f7065727479667800000000000000000000000000000000000000000000736563703235366b3166780000000000000000000000000000000000000000000000013c000000000001000e4173736574416c696173546573740000053900000000000000000000000000000000000000000000000000000000000000000000000000000000000000934d616e75616c6c7920637265617465206120437265617465436861696e54782077686963682063726561746573206120312d6f662d322041564158207574786f20616e6420696e7374616e746961746573206120564d20696e746f206120626c6f636b636861696e20627920636f72726563746c79207369676e696e672074686520322d6f662d33205375626e657441757468000a54657374204173736574000454455354000000000100000000000000010000000700000000000001fb000000000000000000000001000000023cb7d3842e8cee6a0ebd09f1fe884f6861e1b29ca43c1f6ecdcb1fcec86d78446b9cf619c64c604b0000000a000000020000000000000001";
    const createChainTxBuf = buffer_1.Buffer.from(createChainTxHex, "hex");
    const createChainTx = new platformvm_1.CreateChainTx();
    createChainTx.fromBuffer(createChainTxBuf);
    test("getTypeName", () => __awaiter(void 0, void 0, void 0, function* () {
        const createChainTxTypeName = createChainTx.getTypeName();
        expect(createChainTxTypeName).toBe("CreateChainTx");
    }));
    test("getTypeID", () => __awaiter(void 0, void 0, void 0, function* () {
        const createChainTxTypeID = createChainTx.getTypeID();
        expect(createChainTxTypeID).toBe(constants_1.PlatformVMConstants.CREATECHAINTX);
    }));
    test("toBuffer and fromBuffer", () => __awaiter(void 0, void 0, void 0, function* () {
        const buf = createChainTx.toBuffer();
        const ccTx = new platformvm_1.CreateChainTx();
        ccTx.fromBuffer(buf);
        const buf2 = ccTx.toBuffer();
        expect(buf.toString("hex")).toBe(buf2.toString("hex"));
    }));
    test("getAllychainID", () => {
        const snID = "yKRV4EvGYWj7HHXUxSYzaAQVazEvaFPKPhJie4paqbrML5dub";
        const allychainID = createChainTx.getAllychainID();
        expect(allychainID).toBe(snID);
    });
    test("getChainName", () => {
        const cn = "EPIC AVM";
        const chainName = createChainTx.getChainName();
        expect(chainName).toBe(cn);
    });
    test("getVMID", () => {
        const vmIDHex = "61766d0000000000000000000000000000000000000000000000000000000000";
        const vmID = createChainTx.getVMID().toString("hex");
        expect(vmID).toBe(vmIDHex);
    });
    test("getFXIDs", () => {
        const fxIDsHex = [
            "6e66746678000000000000000000000000000000000000000000000000000000",
            "70726f7065727479667800000000000000000000000000000000000000000000",
            "736563703235366b316678000000000000000000000000000000000000000000"
        ];
        const fxIDs = createChainTx.getFXIDs();
        expect(fxIDs.length).toBe(3);
        fxIDs.forEach((fxID, index) => {
            expect(fxID.toString("hex")).toBe(fxIDsHex[index]);
        });
    });
    test("getGenesisData", () => {
        const gd = createChainTx.getGenesisData();
        const genesisData = new index_1.GenesisData();
        const buf = bintools.cb58Decode(gd);
        genesisData.fromBuffer(buf);
        const genesisAssets = genesisData.getGenesisAssets();
        const genesisAsset = genesisAssets[0];
        const n = "Test Asset";
        const name = genesisAsset.getName();
        expect(name).toBe(n);
        const s = "TEST";
        const symbol = genesisAsset.getSymbol();
        expect(symbol).toBe(s);
        const d = 0;
        const denomination = genesisAsset.getDenomination();
        expect(denomination).toBe(d);
    });
    describe("AllychainAuth", () => {
        const sa = createChainTx.getAllychainAuth();
        test("getTypeName", () => __awaiter(void 0, void 0, void 0, function* () {
            const allychainAuthTypeName = sa.getTypeName();
            expect(allychainAuthTypeName).toBe("AllychainAuth");
        }));
        test("getTypeID", () => __awaiter(void 0, void 0, void 0, function* () {
            const allychainAuthTypeID = sa.getTypeID();
            expect(allychainAuthTypeID).toBe(constants_1.PlatformVMConstants.ALLYCHAINAUTH);
        }));
        test("getNumAddressIndices", () => __awaiter(void 0, void 0, void 0, function* () {
            const numAddressIndices = sa.getNumAddressIndices();
            const nAI = 2;
            expect(numAddressIndices).toBe(nAI);
        }));
        test("addressIndices", () => __awaiter(void 0, void 0, void 0, function* () {
            const ai = [0, 1];
            const addressIndices = sa.getAddressIndices();
            addressIndices.forEach((addressIndex, index) => {
                expect(addressIndex.readInt32BE(0)).toBe(ai[index]);
            });
        }));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlY2hhaW50eC50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdGVzdHMvYXBpcy9wbGF0Zm9ybXZtL2NyZWF0ZWNoYWludHgudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLDJFQUFrRDtBQUNsRCxvQ0FBZ0M7QUFDaEMsc0VBQTRFO0FBQzVFLDhDQUE4RDtBQUM5RCxvREFBa0U7QUFFbEUsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFTLEVBQUU7SUFDbkM7O09BRUc7SUFDSCxNQUFNLFFBQVEsR0FBYSxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFBO0lBRWpELE1BQU0sZ0JBQWdCLEdBQ3BCLDR2REFBNHZELENBQUE7SUFDOXZELE1BQU0sZ0JBQWdCLEdBQVcsZUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxLQUFLLENBQUMsQ0FBQTtJQUNyRSxNQUFNLGFBQWEsR0FBa0IsSUFBSSwwQkFBYSxFQUFFLENBQUE7SUFDeEQsYUFBYSxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO0lBRTFDLElBQUksQ0FBQyxhQUFhLEVBQUUsR0FBd0IsRUFBRTtRQUM1QyxNQUFNLHFCQUFxQixHQUFXLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtRQUNqRSxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUE7SUFDckQsQ0FBQyxDQUFBLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBd0IsRUFBRTtRQUMxQyxNQUFNLG1CQUFtQixHQUFXLGFBQWEsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUM3RCxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxJQUFJLENBQUMsK0JBQW1CLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDckUsQ0FBQyxDQUFBLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxHQUF3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RUYsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQXdCLEVBQUU7WUFDL0MsTUFBTSxFQUFFLEdBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7WUFDM0IsTUFBTSxjQUFjLEdBQWEsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUE7WUFDdkQsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQW9CLEVBQUUsS0FBYSxFQUFFLEVBQUU7Z0JBQzdELE1BQU0sQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO1lBQ3JELENBQUMsQ0FBQyxDQUFBO1FBQ0osQ0FBQyxDQUFBLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmluVG9vbHMgZnJvbSBcIi4uLy4uLy4uL3NyYy91dGlscy9iaW50b29sc1wiXHJcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCJidWZmZXIvXCJcclxuaW1wb3J0IHsgUGxhdGZvcm1WTUNvbnN0YW50cyB9IGZyb20gXCIuLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL2NvbnN0YW50c1wiXHJcbmltcG9ydCB7IEdlbmVzaXNBc3NldCwgR2VuZXNpc0RhdGEgfSBmcm9tIFwiLi4vLi4vLi4vc3JjL2luZGV4XCJcclxuaW1wb3J0IHsgQ3JlYXRlQ2hhaW5UeCwgQWxseWNoYWluQXV0aCB9IGZyb20gXCJzcmMvYXBpcy9wbGF0Zm9ybXZtXCJcclxuXHJcbmRlc2NyaWJlKFwiQ3JlYXRlQ2hhaW5UeFwiLCAoKTogdm9pZCA9PiB7XHJcbiAgLyoqXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIGNvbnN0IGJpbnRvb2xzOiBCaW5Ub29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKClcclxuXHJcbiAgY29uc3QgY3JlYXRlQ2hhaW5UeEhleDogc3RyaW5nID1cclxuICAgIFwiMDAwMDA1MzkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDExN2NjOGIxNTc4YmEzODM1NDRkMTYzOTU4ODIyZDhhYmQzODQ5YmI5ZGZhYmUzOWZjYmMzZTdlZTg4MTFmZTJmMDAwMDAwMDcwMDZhOTRkNmQ4MGQ2YzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDIzY2I3ZDM4NDJlOGNlZTZhMGViZDA5ZjFmZTg4NGY2ODYxZTFiMjljYTQzYzFmNmVjZGNiMWZjZWM4NmQ3ODQ0NmI5Y2Y2MTljNjRjNjA0YjAwMDAwMDAxN2ZlMDQ0ZjllOTczNDdjMGE1ZmZlNWEwZjU3NzNiNDIzOThjMGUyYjg1OTQ4NjE2ZGE2ODE1ODVkNDYwZTFhODAwMDAwMDAwMTdjYzhiMTU3OGJhMzgzNTQ0ZDE2Mzk1ODgyMmQ4YWJkMzg0OWJiOWRmYWJlMzlmY2JjM2U3ZWU4ODExZmUyZjAwMDAwMDA1MDA2YTk0ZDcxM2E4MzYwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDA5MzRkNjE2ZTc1NjE2YzZjNzkyMDYzNzI2NTYxNzQ2NTIwNjEyMDQzNzI2NTYxNzQ2NTQzNjg2MTY5NmU1NDc4MjA3NzY4Njk2MzY4MjA2MzcyNjU2MTc0NjU3MzIwNjEyMDMxMmQ2ZjY2MmQzMjIwNDE1NjQxNTgyMDc1NzQ3ODZmMjA2MTZlNjQyMDY5NmU3Mzc0NjE2ZTc0Njk2MTc0NjU3MzIwNjEyMDU2NGQyMDY5NmU3NDZmMjA2MTIwNjI2YzZmNjM2YjYzNjg2MTY5NmUyMDYyNzkyMDYzNmY3MjcyNjU2Mzc0NmM3OTIwNzM2OTY3NmU2OTZlNjcyMDc0Njg2NTIwMzIyZDZmNjYyZDMzMjA1Mzc1NjI2ZTY1NzQ0MTc1NzQ2ODdmZTA0NGY5ZTk3MzQ3YzBhNWZmZTVhMGY1NzczYjQyMzk4YzBlMmI4NTk0ODYxNmRhNjgxNTg1ZDQ2MGUxYTgwMDA4NDU1MDQ5NDMyMDQxNTY0ZDYxNzY2ZDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMzZlNjY3NDY2NzgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA3MDcyNmY3MDY1NzI3NDc5NjY3ODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwNzM2NTYzNzAzMjM1MzY2YjMxNjY3ODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTNjMDAwMDAwMDAwMDAxMDAwZTQxNzM3MzY1NzQ0MTZjNjk2MTczNTQ2NTczNzQwMDAwMDUzOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOTM0ZDYxNmU3NTYxNmM2Yzc5MjA2MzcyNjU2MTc0NjUyMDYxMjA0MzcyNjU2MTc0NjU0MzY4NjE2OTZlNTQ3ODIwNzc2ODY5NjM2ODIwNjM3MjY1NjE3NDY1NzMyMDYxMjAzMTJkNmY2NjJkMzIyMDQxNTY0MTU4MjA3NTc0Nzg2ZjIwNjE2ZTY0MjA2OTZlNzM3NDYxNmU3NDY5NjE3NDY1NzMyMDYxMjA1NjRkMjA2OTZlNzQ2ZjIwNjEyMDYyNmM2ZjYzNmI2MzY4NjE2OTZlMjA2Mjc5MjA2MzZmNzI3MjY1NjM3NDZjNzkyMDczNjk2NzZlNjk2ZTY3MjA3NDY4NjUyMDMyMmQ2ZjY2MmQzMzIwNTM3NTYyNmU2NTc0NDE3NTc0NjgwMDBhNTQ2NTczNzQyMDQxNzM3MzY1NzQwMDA0NTQ0NTUzNTQwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDA3MDAwMDAwMDAwMDAwMDFmYjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAyM2NiN2QzODQyZThjZWU2YTBlYmQwOWYxZmU4ODRmNjg2MWUxYjI5Y2E0M2MxZjZlY2RjYjFmY2VjODZkNzg0NDZiOWNmNjE5YzY0YzYwNGIwMDAwMDAwYTAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMVwiXHJcbiAgY29uc3QgY3JlYXRlQ2hhaW5UeEJ1ZjogQnVmZmVyID0gQnVmZmVyLmZyb20oY3JlYXRlQ2hhaW5UeEhleCwgXCJoZXhcIilcclxuICBjb25zdCBjcmVhdGVDaGFpblR4OiBDcmVhdGVDaGFpblR4ID0gbmV3IENyZWF0ZUNoYWluVHgoKVxyXG4gIGNyZWF0ZUNoYWluVHguZnJvbUJ1ZmZlcihjcmVhdGVDaGFpblR4QnVmKVxyXG5cclxuICB0ZXN0KFwiZ2V0VHlwZU5hbWVcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgY29uc3QgY3JlYXRlQ2hhaW5UeFR5cGVOYW1lOiBzdHJpbmcgPSBjcmVhdGVDaGFpblR4LmdldFR5cGVOYW1lKClcclxuICAgIGV4cGVjdChjcmVhdGVDaGFpblR4VHlwZU5hbWUpLnRvQmUoXCJDcmVhdGVDaGFpblR4XCIpXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcImdldFR5cGVJRFwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBjb25zdCBjcmVhdGVDaGFpblR4VHlwZUlEOiBudW1iZXIgPSBjcmVhdGVDaGFpblR4LmdldFR5cGVJRCgpXHJcbiAgICBleHBlY3QoY3JlYXRlQ2hhaW5UeFR5cGVJRCkudG9CZShQbGF0Zm9ybVZNQ29uc3RhbnRzLkNSRUFURUNIQUlOVFgpXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcInRvQnVmZmVyIGFuZCBmcm9tQnVmZmVyXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGNvbnN0IGJ1ZjogQnVmZmVyID0gY3JlYXRlQ2hhaW5UeC50b0J1ZmZlcigpXHJcbiAgICBjb25zdCBjY1R4OiBDcmVhdGVDaGFpblR4ID0gbmV3IENyZWF0ZUNoYWluVHgoKVxyXG4gICAgY2NUeC5mcm9tQnVmZmVyKGJ1ZilcclxuICAgIGNvbnN0IGJ1ZjI6IEJ1ZmZlciA9IGNjVHgudG9CdWZmZXIoKVxyXG4gICAgZXhwZWN0KGJ1Zi50b1N0cmluZyhcImhleFwiKSkudG9CZShidWYyLnRvU3RyaW5nKFwiaGV4XCIpKVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJnZXRBbGx5Y2hhaW5JRFwiLCAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBzbklEOiBzdHJpbmcgPSBcInlLUlY0RXZHWVdqN0hIWFV4U1l6YUFRVmF6RXZhRlBLUGhKaWU0cGFxYnJNTDVkdWJcIlxyXG4gICAgY29uc3QgYWxseWNoYWluSUQ6IHN0cmluZyA9IGNyZWF0ZUNoYWluVHguZ2V0QWxseWNoYWluSUQoKVxyXG4gICAgZXhwZWN0KGFsbHljaGFpbklEKS50b0JlKHNuSUQpXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcImdldENoYWluTmFtZVwiLCAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBjbjogc3RyaW5nID0gXCJFUElDIEFWTVwiXHJcbiAgICBjb25zdCBjaGFpbk5hbWU6IHN0cmluZyA9IGNyZWF0ZUNoYWluVHguZ2V0Q2hhaW5OYW1lKClcclxuICAgIGV4cGVjdChjaGFpbk5hbWUpLnRvQmUoY24pXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcImdldFZNSURcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3Qgdm1JREhleDogc3RyaW5nID1cclxuICAgICAgXCI2MTc2NmQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCJcclxuICAgIGNvbnN0IHZtSUQ6IHN0cmluZyA9IGNyZWF0ZUNoYWluVHguZ2V0Vk1JRCgpLnRvU3RyaW5nKFwiaGV4XCIpXHJcbiAgICBleHBlY3Qodm1JRCkudG9CZSh2bUlESGV4KVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJnZXRGWElEc1wiLCAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBmeElEc0hleDogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiNmU2Njc0NjY3ODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxyXG4gICAgICBcIjcwNzI2ZjcwNjU3Mjc0Nzk2Njc4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcclxuICAgICAgXCI3MzY1NjM3MDMyMzUzNjZiMzE2Njc4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCJcclxuICAgIF1cclxuICAgIGNvbnN0IGZ4SURzOiBCdWZmZXJbXSA9IGNyZWF0ZUNoYWluVHguZ2V0RlhJRHMoKVxyXG4gICAgZXhwZWN0KGZ4SURzLmxlbmd0aCkudG9CZSgzKVxyXG4gICAgZnhJRHMuZm9yRWFjaCgoZnhJRDogQnVmZmVyLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgIGV4cGVjdChmeElELnRvU3RyaW5nKFwiaGV4XCIpKS50b0JlKGZ4SURzSGV4W2luZGV4XSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcImdldEdlbmVzaXNEYXRhXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IGdkOiBzdHJpbmcgPSBjcmVhdGVDaGFpblR4LmdldEdlbmVzaXNEYXRhKClcclxuICAgIGNvbnN0IGdlbmVzaXNEYXRhOiBHZW5lc2lzRGF0YSA9IG5ldyBHZW5lc2lzRGF0YSgpXHJcbiAgICBjb25zdCBidWY6IEJ1ZmZlciA9IGJpbnRvb2xzLmNiNThEZWNvZGUoZ2QpXHJcbiAgICBnZW5lc2lzRGF0YS5mcm9tQnVmZmVyKGJ1ZilcclxuICAgIGNvbnN0IGdlbmVzaXNBc3NldHM6IEdlbmVzaXNBc3NldFtdID0gZ2VuZXNpc0RhdGEuZ2V0R2VuZXNpc0Fzc2V0cygpXHJcbiAgICBjb25zdCBnZW5lc2lzQXNzZXQ6IEdlbmVzaXNBc3NldCA9IGdlbmVzaXNBc3NldHNbMF1cclxuXHJcbiAgICBjb25zdCBuOiBzdHJpbmcgPSBcIlRlc3QgQXNzZXRcIlxyXG4gICAgY29uc3QgbmFtZTogc3RyaW5nID0gZ2VuZXNpc0Fzc2V0LmdldE5hbWUoKVxyXG4gICAgZXhwZWN0KG5hbWUpLnRvQmUobilcclxuXHJcbiAgICBjb25zdCBzOiBzdHJpbmcgPSBcIlRFU1RcIlxyXG4gICAgY29uc3Qgc3ltYm9sOiBzdHJpbmcgPSBnZW5lc2lzQXNzZXQuZ2V0U3ltYm9sKClcclxuICAgIGV4cGVjdChzeW1ib2wpLnRvQmUocylcclxuXHJcbiAgICBjb25zdCBkOiBudW1iZXIgPSAwXHJcbiAgICBjb25zdCBkZW5vbWluYXRpb24gPSBnZW5lc2lzQXNzZXQuZ2V0RGVub21pbmF0aW9uKClcclxuICAgIGV4cGVjdChkZW5vbWluYXRpb24pLnRvQmUoZClcclxuICB9KVxyXG5cclxuICBkZXNjcmliZShcIkFsbHljaGFpbkF1dGhcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3Qgc2E6IEFsbHljaGFpbkF1dGggPSBjcmVhdGVDaGFpblR4LmdldEFsbHljaGFpbkF1dGgoKVxyXG5cclxuICAgIHRlc3QoXCJnZXRUeXBlTmFtZVwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgIGNvbnN0IGFsbHljaGFpbkF1dGhUeXBlTmFtZTogc3RyaW5nID0gc2EuZ2V0VHlwZU5hbWUoKVxyXG4gICAgICBleHBlY3QoYWxseWNoYWluQXV0aFR5cGVOYW1lKS50b0JlKFwiQWxseWNoYWluQXV0aFwiKVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KFwiZ2V0VHlwZUlEXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgY29uc3QgYWxseWNoYWluQXV0aFR5cGVJRDogbnVtYmVyID0gc2EuZ2V0VHlwZUlEKClcclxuICAgICAgZXhwZWN0KGFsbHljaGFpbkF1dGhUeXBlSUQpLnRvQmUoUGxhdGZvcm1WTUNvbnN0YW50cy5BTExZQ0hBSU5BVVRIKVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KFwiZ2V0TnVtQWRkcmVzc0luZGljZXNcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgICBjb25zdCBudW1BZGRyZXNzSW5kaWNlczogbnVtYmVyID0gc2EuZ2V0TnVtQWRkcmVzc0luZGljZXMoKVxyXG4gICAgICBjb25zdCBuQUk6IG51bWJlciA9IDJcclxuICAgICAgZXhwZWN0KG51bUFkZHJlc3NJbmRpY2VzKS50b0JlKG5BSSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdChcImFkZHJlc3NJbmRpY2VzXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgY29uc3QgYWk6IG51bWJlcltdID0gWzAsIDFdXHJcbiAgICAgIGNvbnN0IGFkZHJlc3NJbmRpY2VzOiBCdWZmZXJbXSA9IHNhLmdldEFkZHJlc3NJbmRpY2VzKClcclxuICAgICAgYWRkcmVzc0luZGljZXMuZm9yRWFjaCgoYWRkcmVzc0luZGV4OiBCdWZmZXIsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICBleHBlY3QoYWRkcmVzc0luZGV4LnJlYWRJbnQzMkJFKDApKS50b0JlKGFpW2luZGV4XSlcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSlcclxufSlcclxuIl19