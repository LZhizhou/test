"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const buffer_1 = require("buffer/");
const payload_1 = require("../../src/utils/payload");
const bintools_1 = __importDefault(require("../../src/utils/bintools"));
const bn_js_1 = __importDefault(require("bn.js"));
const bech32 = __importStar(require("bech32"));
const payloadTypes = payload_1.PayloadTypes.getInstance();
const bintools = bintools_1.default.getInstance();
describe("Payload", () => {
    const hrp = "tests";
    const cb58str = "MBcQpm1PsdfBKYscN3AYP56MusRDMZGF9";
    const cb58buf = bintools.bufferToB58(bintools.cb58Decode(cb58str));
    const bech = bech32.bech32.encode(hrp, bech32.bech32.toWords(bintools.b58ToBuffer(cb58buf)));
    const binstr = "Bx4v7ytutz3";
    const utf8str = "I am the very model of a modern Major-General.";
    const utf8b58 = bintools.bufferToB58(buffer_1.Buffer.from(utf8str));
    const utf8hex = buffer_1.Buffer.from(utf8str).toString("hex");
    const utf8b64 = buffer_1.Buffer.from(utf8str).toString("base64");
    const bnhex = "deadbeef";
    const svgstr = "<svg>hi mom</svg>";
    const csvstr = "1,2,3,4,5\neverybody,in the,house,come along, let's ride";
    const jsonobj = { boom: "goes the dynamite" };
    const yamlstr = "---\nrootproperty: blah\nsection:\n  one: two\n  three: four\n  Foo: Bar\n  empty: ~";
    const emailstr = "example@example.com";
    const urlstr = "https://example.com";
    const ipfsstr = "QmUy4jh5mGNZvLkjies1RWM4YuvJh5o2FYopNPVYwrRVGV";
    const onionstr = "https://el33th4xor.onion";
    const magnetstr = "magnet:?xt=urn:btih:c12fe1c06bba254a9dc9f519b335aa7c1367a88a";
    test("PayloadTypes", () => {
        expect(() => {
            payloadTypes.select(867309);
        }).toThrow();
        expect(payloadTypes.lookupID("BIN")).toBe(0);
        const binpayload = payloadTypes.select(0, binstr);
        const utf8payload = payloadTypes.select(1, utf8str);
        const hexstrpayload = payloadTypes.select(2, bnhex);
        const emailpayload = payloadTypes.select(26, emailstr);
        expect(payloadTypes.getTypeID(binpayload.toBuffer())).toBe(0);
        expect(payloadTypes.getTypeID(utf8payload.toBuffer())).toBe(1);
        expect(payloadTypes.getTypeID(hexstrpayload.toBuffer())).toBe(2);
        expect(payloadTypes.getTypeID(emailpayload.toBuffer())).toBe(26);
        const pp = payloadTypes.getContent(binpayload.toBuffer());
        expect(bintools.b58ToBuffer(binstr).toString("hex")).toBe(pp.toString("hex"));
        expect(payloadTypes.lookupType(0)).toBe("BIN");
        expect(payloadTypes.recast(binpayload).toBuffer().toString("hex")).toBe(binpayload.toBuffer().toString("hex"));
    });
    const testTable = [
        ["BIN", binstr, binstr],
        ["UTF8", utf8str, utf8b58],
        ["HEXSTR", utf8hex, utf8b58],
        ["B58STR", utf8b58, utf8b58],
        ["B64STR", utf8b64, utf8b58],
        ["BIGNUM", bnhex, bintools.bufferToB58(buffer_1.Buffer.from(bnhex, "hex"))],
        ["SWAPCHAINADDR", "Swap-" + bech, cb58buf],
        ["CORECHAINADDR", "Core-" + bech, cb58buf],
        ["AXCHAINADDR", "AX-" + bech, cb58buf],
        ["TXID", cb58str, cb58buf],
        ["ASSETID", cb58str, cb58buf],
        ["UTXOID", cb58str, cb58buf],
        ["NFTID", cb58str, cb58buf],
        ["ALLYCHAINID", cb58str, cb58buf],
        ["CHAINID", cb58str, cb58buf],
        ["NODEID", cb58str, cb58buf],
        ["SECPSIG", cb58str, cb58str],
        ["SECPENC", cb58str, cb58str],
        ["JPEG", binstr, binstr],
        ["PNG", binstr, binstr],
        ["BMP", binstr, binstr],
        ["ICO", binstr, binstr],
        ["SVG", svgstr, bintools.bufferToB58(buffer_1.Buffer.from(svgstr))],
        ["CSV", csvstr, bintools.bufferToB58(buffer_1.Buffer.from(csvstr))],
        [
            "JSON",
            JSON.stringify(jsonobj),
            bintools.bufferToB58(buffer_1.Buffer.from(JSON.stringify(jsonobj)))
        ],
        ["YAML", yamlstr, bintools.bufferToB58(buffer_1.Buffer.from(yamlstr))],
        ["EMAIL", emailstr, bintools.bufferToB58(buffer_1.Buffer.from(emailstr))],
        ["URL", urlstr, bintools.bufferToB58(buffer_1.Buffer.from(urlstr))],
        ["IPFS", ipfsstr, ipfsstr],
        ["ONION", onionstr, bintools.bufferToB58(buffer_1.Buffer.from(onionstr))],
        ["MAGNET", magnetstr, bintools.bufferToB58(buffer_1.Buffer.from(magnetstr))]
    ];
    test.each(testTable)("Basic Payload Test: typestr %s input %s inputbuff %s", (typestr, inputstr, inputbuff) => {
        const buff = bintools.b58ToBuffer(inputbuff);
        const typeid = payloadTypes.lookupID(typestr);
        const typename = payloadTypes.lookupType(typeid);
        expect(typename).toBe(typestr);
        const c0 = payloadTypes.select(typeid);
        expect(c0.typeID()).toBe(typeid);
        expect(c0.typeName()).toBe(typename);
        const c1 = payloadTypes.select(typeid, buff);
        const c2 = payloadTypes.select(typeid, inputstr, hrp);
        const c3 = payloadTypes.select(typeid);
        c3.fromBuffer(c1.toBuffer());
        const c4 = payloadTypes.select(typeid);
        c4.fromBuffer(c2.toBuffer());
        const s1 = c1.toBuffer().toString("hex");
        const s2 = c2.toBuffer().toString("hex");
        const s3 = c3.toBuffer().toString("hex");
        const s4 = c4.toBuffer().toString("hex");
        expect(s1).toBe(s2);
        expect(s2).toBe(s3);
        expect(s3).toBe(s4);
    });
    test("BINPayload special cases", () => {
        const pl = payloadTypes.select(0, binstr);
        expect(bintools.bufferToB58(pl.returnType())).toBe(binstr);
    });
    test("UTF8Payload special cases", () => {
        const pl = new payload_1.UTF8Payload(utf8str);
        expect(pl.returnType()).toBe(utf8str);
    });
    test("HEXSTRPayload special cases", () => {
        const pl = new payload_1.HEXSTRPayload(utf8hex);
        expect(pl.returnType()).toBe(utf8hex);
    });
    test("B58STRPayload special cases", () => {
        const pl = new payload_1.B58STRPayload(utf8b58);
        expect(pl.returnType()).toBe(utf8b58);
    });
    test("B64STRPayload special cases", () => {
        const pl = new payload_1.B64STRPayload(utf8b64);
        expect(pl.returnType()).toBe(utf8b64);
    });
    test("BIGNUMPayload special cases", () => {
        const jenny = new bn_js_1.default(8675309);
        const pl = new payload_1.BIGNUMPayload(jenny);
        expect(pl.returnType().toString("hex")).toBe(jenny.toString("hex"));
    });
    test("SWAPCHAINADDRPayload special cases", () => {
        const addr = `Swap-${bech}`;
        const pl = new payload_1.SWAPCHAINADDRPayload(addr, hrp);
        expect(pl.returnType(hrp)).toBe(addr);
        expect(pl.returnChainID()).toBe("Swap");
    });
    test("CORECHAINADDRPayload special cases", () => {
        const addr = `Core-${bech}`;
        const pl = new payload_1.CORECHAINADDRPayload(addr, hrp);
        expect(pl.returnType(hrp)).toBe(addr);
        expect(pl.returnChainID()).toBe("Core");
    });
    test("AXCHAINADDRPayload special cases", () => {
        const addr = `AX-${bech}`;
        const pl = new payload_1.AXCHAINADDRPayload(addr, hrp);
        expect(pl.returnType(hrp)).toBe(addr);
        expect(pl.returnChainID()).toBe("AX");
    });
    // handles all of cb58EncodedPayload
    test("TXIDPayload special cases", () => {
        const pl = new payload_1.TXIDPayload(cb58str);
        expect(pl.returnType()).toBe(cb58str);
    });
    test("JSONPayload special cases", () => {
        const pl = new payload_1.JSONPayload(jsonobj);
        expect(JSON.stringify(pl.returnType())).toBe(JSON.stringify(jsonobj));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5bG9hZC50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdGVzdHMvY29tbW9uL3BheWxvYWQudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsb0NBQWdDO0FBQ2hDLHFEQWVnQztBQUNoQyx3RUFBK0M7QUFDL0Msa0RBQXNCO0FBQ3RCLCtDQUFnQztBQUNoQyxNQUFNLFlBQVksR0FBaUIsc0JBQVksQ0FBQyxXQUFXLEVBQUUsQ0FBQTtBQUM3RCxNQUFNLFFBQVEsR0FBYSxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFBO0FBRWpELFFBQVEsQ0FBQyxTQUFTLEVBQUUsR0FBUyxFQUFFO0lBQzdCLE1BQU0sR0FBRyxHQUFXLE9BQU8sQ0FBQTtJQUUzQixNQUFNLE9BQU8sR0FBVyxtQ0FBbUMsQ0FBQTtJQUMzRCxNQUFNLE9BQU8sR0FBVyxRQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtJQUMxRSxNQUFNLElBQUksR0FBVyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FDdkMsR0FBRyxFQUNILE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FDckQsQ0FBQTtJQUNELE1BQU0sTUFBTSxHQUFXLGFBQWEsQ0FBQTtJQUNwQyxNQUFNLE9BQU8sR0FBVyxnREFBZ0QsQ0FBQTtJQUN4RSxNQUFNLE9BQU8sR0FBVyxRQUFRLENBQUMsV0FBVyxDQUFDLGVBQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtJQUNsRSxNQUFNLE9BQU8sR0FBVyxlQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUM1RCxNQUFNLE9BQU8sR0FBVyxlQUFNLENBQUMsSUFBSSxDQUFD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Q0FBQyxDQUFBO1FBQ2hELE1BQU0sQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDdkMsQ0FBQyxDQUFDLENBQUE7SUFFRixJQUFJLENBQUMsMkJBQTJCLEVBQUUsR0FBUyxFQUFFO1FBQzNDLE1BQU0sRUFBRSxHQUFnQixJQUFJLHFCQUFXLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDaEQsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO0lBQ3ZFLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiYnVmZmVyL1wiXHJcbmltcG9ydCB7XHJcbiAgUGF5bG9hZFR5cGVzLFxyXG4gIEJJTlBheWxvYWQsXHJcbiAgUGF5bG9hZEJhc2UsXHJcbiAgVVRGOFBheWxvYWQsXHJcbiAgSEVYU1RSUGF5bG9hZCxcclxuICBCNThTVFJQYXlsb2FkLFxyXG4gIEI2NFNUUlBheWxvYWQsXHJcbiAgQklHTlVNUGF5bG9hZCxcclxuICBTV0FQQ0hBSU5BRERSUGF5bG9hZCxcclxuICBDT1JFQ0hBSU5BRERSUGF5bG9hZCxcclxuICBBWENIQUlOQUREUlBheWxvYWQsXHJcbiAgVFhJRFBheWxvYWQsXHJcbiAgSlNPTlBheWxvYWQsXHJcbiAgRU1BSUxQYXlsb2FkXHJcbn0gZnJvbSBcIi4uLy4uL3NyYy91dGlscy9wYXlsb2FkXCJcclxuaW1wb3J0IEJpblRvb2xzIGZyb20gXCIuLi8uLi9zcmMvdXRpbHMvYmludG9vbHNcIlxyXG5pbXBvcnQgQk4gZnJvbSBcImJuLmpzXCJcclxuaW1wb3J0ICogYXMgYmVjaDMyIGZyb20gXCJiZWNoMzJcIlxyXG5jb25zdCBwYXlsb2FkVHlwZXM6IFBheWxvYWRUeXBlcyA9IFBheWxvYWRUeXBlcy5nZXRJbnN0YW5jZSgpXHJcbmNvbnN0IGJpbnRvb2xzOiBCaW5Ub29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKClcclxuXHJcbmRlc2NyaWJlKFwiUGF5bG9hZFwiLCAoKTogdm9pZCA9PiB7XHJcbiAgY29uc3QgaHJwOiBzdHJpbmcgPSBcInRlc3RzXCJcclxuXHJcbiAgY29uc3QgY2I1OHN0cjogc3RyaW5nID0gXCJNQmNRcG0xUHNkZkJLWXNjTjNBWVA1Nk11c1JETVpHRjlcIlxyXG4gIGNvbnN0IGNiNThidWY6IHN0cmluZyA9IGJpbnRvb2xzLmJ1ZmZlclRvQjU4KGJpbnRvb2xzLmNiNThEZWNvZGUoY2I1OHN0cikpXHJcbiAgY29uc3QgYmVjaDogc3RyaW5nID0gYmVjaDMyLmJlY2gzMi5lbmNvZGUoXHJcbiAgICBocnAsXHJcbiAgICBiZWNoMzIuYmVjaDMyLnRvV29yZHMoYmludG9vbHMuYjU4VG9CdWZmZXIoY2I1OGJ1ZikpXHJcbiAgKVxyXG4gIGNvbnN0IGJpbnN0cjogc3RyaW5nID0gXCJCeDR2N3l0dXR6M1wiXHJcbiAgY29uc3QgdXRmOHN0cjogc3RyaW5nID0gXCJJIGFtIHRoZSB2ZXJ5IG1vZGVsIG9mIGEgbW9kZXJuIE1ham9yLUdlbmVyYWwuXCJcclxuICBjb25zdCB1dGY4YjU4OiBzdHJpbmcgPSBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbSh1dGY4c3RyKSlcclxuICBjb25zdCB1dGY4aGV4OiBzdHJpbmcgPSBCdWZmZXIuZnJvbSh1dGY4c3RyKS50b1N0cmluZyhcImhleFwiKVxyXG4gIGNvbnN0IHV0ZjhiNjQ6IHN0cmluZyA9IEJ1ZmZlci5mcm9tKHV0ZjhzdHIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpXHJcbiAgY29uc3QgYm5oZXg6IHN0cmluZyA9IFwiZGVhZGJlZWZcIlxyXG4gIGNvbnN0IHN2Z3N0cjogc3RyaW5nID0gXCI8c3ZnPmhpIG1vbTwvc3ZnPlwiXHJcbiAgY29uc3QgY3N2c3RyOiBzdHJpbmcgPVxyXG4gICAgXCIxLDIsMyw0LDVcXG5ldmVyeWJvZHksaW4gdGhlLGhvdXNlLGNvbWUgYWxvbmcsIGxldCdzIHJpZGVcIlxyXG4gIGNvbnN0IGpzb25vYmo6IG9iamVjdCA9IHsgYm9vbTogXCJnb2VzIHRoZSBkeW5hbWl0ZVwiIH1cclxuICBjb25zdCB5YW1sc3RyOiBzdHJpbmcgPVxyXG4gICAgXCItLS1cXG5yb290cHJvcGVydHk6IGJsYWhcXG5zZWN0aW9uOlxcbiAgb25lOiB0d29cXG4gIHRocmVlOiBmb3VyXFxuICBGb286IEJhclxcbiAgZW1wdHk6IH5cIlxyXG4gIGNvbnN0IGVtYWlsc3RyOiBzdHJpbmcgPSBcImV4YW1wbGVAZXhhbXBsZS5jb21cIlxyXG4gIGNvbnN0IHVybHN0cjogc3RyaW5nID0gXCJodHRwczovL2V4YW1wbGUuY29tXCJcclxuICBjb25zdCBpcGZzc3RyOiBzdHJpbmcgPSBcIlFtVXk0amg1bUdOWnZMa2ppZXMxUldNNFl1dkpoNW8yRllvcE5QVll3clJWR1ZcIlxyXG4gIGNvbnN0IG9uaW9uc3RyOiBzdHJpbmcgPSBcImh0dHBzOi8vZWwzM3RoNHhvci5vbmlvblwiXHJcbiAgY29uc3QgbWFnbmV0c3RyOiBzdHJpbmcgPVxyXG4gICAgXCJtYWduZXQ6P3h0PXVybjpidGloOmMxMmZlMWMwNmJiYTI1NGE5ZGM5ZjUxOWIzMzVhYTdjMTM2N2E4OGFcIlxyXG5cclxuICB0ZXN0KFwiUGF5bG9hZFR5cGVzXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGV4cGVjdCgoKTogdm9pZCA9PiB7XHJcbiAgICAgIHBheWxvYWRUeXBlcy5zZWxlY3QoODY3MzA5KVxyXG4gICAgfSkudG9UaHJvdygpXHJcblxyXG4gICAgZXhwZWN0KHBheWxvYWRUeXBlcy5sb29rdXBJRChcIkJJTlwiKSkudG9CZSgwKVxyXG5cclxuICAgIGNvbnN0IGJpbnBheWxvYWQgPSBwYXlsb2FkVHlwZXMuc2VsZWN0KDAsIGJpbnN0cikgYXMgQklOUGF5bG9hZFxyXG4gICAgY29uc3QgdXRmOHBheWxvYWQgPSBwYXlsb2FkVHlwZXMuc2VsZWN0KDEsIHV0ZjhzdHIpIGFzIFVURjhQYXlsb2FkXHJcbiAgICBjb25zdCBoZXhzdHJwYXlsb2FkID0gcGF5bG9hZFR5cGVzLnNlbGVjdCgyLCBibmhleCkgYXMgSEVYU1RSUGF5bG9hZFxyXG4gICAgY29uc3QgZW1haWxwYXlsb2FkID0gcGF5bG9hZFR5cGVzLnNlbGVjdCgyNiwgZW1haWxzdHIpIGFzIEVNQUlMUGF5bG9hZFxyXG5cclxuICAgIGV4cGVjdChwYXlsb2FkVHlwZXMuZ2V0VHlwZUlEKGJpbnBheWxvYWQudG9CdWZmZXIoKSkpLnRvQmUoMClcclxuICAgIGV4cGVjdChwYXlsb2FkVHlwZXMuZ2V0VHlwZUlEKHV0ZjhwYXlsb2FkLnRvQnVmZmVyKCkpKS50b0JlKDEpXHJcbiAgICBleHBlY3QocGF5bG9hZFR5cGVzLmdldFR5cGVJRChoZXhzdHJwYXlsb2FkLnRvQnVmZmVyKCkpKS50b0JlKDIpXHJcbiAgICBleHBlY3QocGF5bG9hZFR5cGVzLmdldFR5cGVJRChlbWFpbHBheWxvYWQudG9CdWZmZXIoKSkpLnRvQmUoMjYpXHJcblxyXG4gICAgY29uc3QgcHA6IEJ1ZmZlciA9IHBheWxvYWRUeXBlcy5nZXRDb250ZW50KGJpbnBheWxvYWQudG9CdWZmZXIoKSlcclxuXHJcbiAgICBleHBlY3QoYmludG9vbHMuYjU4VG9CdWZmZXIoYmluc3RyKS50b1N0cmluZyhcImhleFwiKSkudG9CZShcclxuICAgICAgcHAudG9TdHJpbmcoXCJoZXhcIilcclxuICAgIClcclxuICAgIGV4cGVjdChwYXlsb2FkVHlwZXMubG9va3VwVHlwZSgwKSkudG9CZShcIkJJTlwiKVxyXG4gICAgZXhwZWN0KHBheWxvYWRUeXBlcy5yZWNhc3QoYmlucGF5bG9hZCkudG9CdWZmZXIoKS50b1N0cmluZyhcImhleFwiKSkudG9CZShcclxuICAgICAgYmlucGF5bG9hZC50b0J1ZmZlcigpLnRvU3RyaW5nKFwiaGV4XCIpXHJcbiAgICApXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgdGVzdFRhYmxlOiBhbnlbXSA9IFtcclxuICAgIFtcIkJJTlwiLCBiaW5zdHIsIGJpbnN0cl0sXHJcbiAgICBbXCJVVEY4XCIsIHV0ZjhzdHIsIHV0ZjhiNThdLFxyXG4gICAgW1wiSEVYU1RSXCIsIHV0ZjhoZXgsIHV0ZjhiNThdLFxyXG4gICAgW1wiQjU4U1RSXCIsIHV0ZjhiNTgsIHV0ZjhiNThdLFxyXG4gICAgW1wiQjY0U1RSXCIsIHV0ZjhiNjQsIHV0ZjhiNThdLFxyXG4gICAgW1wiQklHTlVNXCIsIGJuaGV4LCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShibmhleCwgXCJoZXhcIikpXSxcclxuICAgIFtcIlNXQVBDSEFJTkFERFJcIiwgXCJTd2FwLVwiICsgYmVjaCwgY2I1OGJ1Zl0sXHJcbiAgICBbXCJDT1JFQ0hBSU5BRERSXCIsIFwiQ29yZS1cIiArIGJlY2gsIGNiNThidWZdLFxyXG4gICAgW1wiQVhDSEFJTkFERFJcIiwgXCJBWC1cIiArIGJlY2gsIGNiNThidWZdLFxyXG4gICAgW1wiVFhJRFwiLCBjYjU4c3RyLCBjYjU4YnVmXSxcclxuICAgIFtcIkFTU0VUSURcIiwgY2I1OHN0ciwgY2I1OGJ1Zl0sXHJcbiAgICBbXCJVVFhPSURcIiwgY2I1OHN0ciwgY2I1OGJ1Zl0sXHJcbiAgICBbXCJORlRJRFwiLCBjYjU4c3RyLCBjYjU4YnVmXSxcclxuICAgIFtcIkFMTFlDSEFJTklEXCIsIGNiNThzdHIsIGNiNThidWZdLFxyXG4gICAgW1wiQ0hBSU5JRFwiLCBjYjU4c3RyLCBjYjU4YnVmXSxcclxuICAgIFtcIk5PREVJRFwiLCBjYjU4c3RyLCBjYjU4YnVmXSxcclxuICAgIFtcIlNFQ1BTSUdcIiwgY2I1OHN0ciwgY2I1OHN0cl0sXHJcbiAgICBbXCJTRUNQRU5DXCIsIGNiNThzdHIsIGNiNThzdHJdLFxyXG4gICAgW1wiSlBFR1wiLCBiaW5zdHIsIGJpbnN0cl0sXHJcbiAgICBbXCJQTkdcIiwgYmluc3RyLCBiaW5zdHJdLFxyXG4gICAgW1wiQk1QXCIsIGJpbnN0ciwgYmluc3RyXSxcclxuICAgIFtcIklDT1wiLCBiaW5zdHIsIGJpbnN0cl0sXHJcbiAgICBbXCJTVkdcIiwgc3Znc3RyLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShzdmdzdHIpKV0sXHJcbiAgICBbXCJDU1ZcIiwgY3N2c3RyLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShjc3ZzdHIpKV0sXHJcbiAgICBbXHJcbiAgICAgIFwiSlNPTlwiLFxyXG4gICAgICBKU09OLnN0cmluZ2lmeShqc29ub2JqKSxcclxuICAgICAgYmludG9vbHMuYnVmZmVyVG9CNTgoQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoanNvbm9iaikpKVxyXG4gICAgXSxcclxuICAgIFtcIllBTUxcIiwgeWFtbHN0ciwgYmludG9vbHMuYnVmZmVyVG9CNTgoQnVmZmVyLmZyb20oeWFtbHN0cikpXSxcclxuICAgIFtcIkVNQUlMXCIsIGVtYWlsc3RyLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShlbWFpbHN0cikpXSxcclxuICAgIFtcIlVSTFwiLCB1cmxzdHIsIGJpbnRvb2xzLmJ1ZmZlclRvQjU4KEJ1ZmZlci5mcm9tKHVybHN0cikpXSxcclxuICAgIFtcIklQRlNcIiwgaXBmc3N0ciwgaXBmc3N0cl0sXHJcbiAgICBbXCJPTklPTlwiLCBvbmlvbnN0ciwgYmludG9vbHMuYnVmZmVyVG9CNTgoQnVmZmVyLmZyb20ob25pb25zdHIpKV0sXHJcbiAgICBbXCJNQUdORVRcIiwgbWFnbmV0c3RyLCBiaW50b29scy5idWZmZXJUb0I1OChCdWZmZXIuZnJvbShtYWduZXRzdHIpKV1cclxuICBdXHJcbiAgdGVzdC5lYWNoKHRlc3RUYWJsZSkoXHJcbiAgICBcIkJhc2ljIFBheWxvYWQgVGVzdDogdHlwZXN0ciAlcyBpbnB1dCAlcyBpbnB1dGJ1ZmYgJXNcIixcclxuICAgICh0eXBlc3RyOiBzdHJpbmcsIGlucHV0c3RyOiBzdHJpbmcsIGlucHV0YnVmZjogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICAgIGNvbnN0IGJ1ZmY6IEJ1ZmZlciA9IGJpbnRvb2xzLmI1OFRvQnVmZmVyKGlucHV0YnVmZilcclxuICAgICAgY29uc3QgdHlwZWlkOiBudW1iZXIgPSBwYXlsb2FkVHlwZXMubG9va3VwSUQodHlwZXN0cilcclxuICAgICAgY29uc3QgdHlwZW5hbWU6IHN0cmluZyA9IHBheWxvYWRUeXBlcy5sb29rdXBUeXBlKHR5cGVpZClcclxuICAgICAgZXhwZWN0KHR5cGVuYW1lKS50b0JlKHR5cGVzdHIpXHJcbiAgICAgIGNvbnN0IGMwOiBQYXlsb2FkQmFzZSA9IHBheWxvYWRUeXBlcy5zZWxlY3QodHlwZWlkKVxyXG4gICAgICBleHBlY3QoYzAudHlwZUlEKCkpLnRvQmUodHlwZWlkKVxyXG4gICAgICBleHBlY3QoYzAudHlwZU5hbWUoKSkudG9CZSh0eXBlbmFtZSlcclxuICAgICAgY29uc3QgYzE6IFBheWxvYWRCYXNlID0gcGF5bG9hZFR5cGVzLnNlbGVjdCh0eXBlaWQsIGJ1ZmYpXHJcbiAgICAgIGNvbnN0IGMyOiBQYXlsb2FkQmFzZSA9IHBheWxvYWRUeXBlcy5zZWxlY3QodHlwZWlkLCBpbnB1dHN0ciwgaHJwKVxyXG4gICAgICBjb25zdCBjMzogUGF5bG9hZEJhc2UgPSBwYXlsb2FkVHlwZXMuc2VsZWN0KHR5cGVpZClcclxuICAgICAgYzMuZnJvbUJ1ZmZlcihjMS50b0J1ZmZlcigpKVxyXG4gICAgICBjb25zdCBjNDogUGF5bG9hZEJhc2UgPSBwYXlsb2FkVHlwZXMuc2VsZWN0KHR5cGVpZClcclxuICAgICAgYzQuZnJvbUJ1ZmZlcihjMi50b0J1ZmZlcigpKVxyXG5cclxuICAgICAgY29uc3QgczE6IHN0cmluZyA9IGMxLnRvQnVmZmVyKCkudG9TdHJpbmcoXCJoZXhcIilcclxuICAgICAgY29uc3QgczI6IHN0cmluZyA9IGMyLnRvQnVmZmVyKCkudG9TdHJpbmcoXCJoZXhcIilcclxuICAgICAgY29uc3QgczM6IHN0cmluZyA9IGMzLnRvQnVmZmVyKCkudG9TdHJpbmcoXCJoZXhcIilcclxuICAgICAgY29uc3QgczQ6IHN0cmluZyA9IGM0LnRvQnVmZmVyKCkudG9TdHJpbmcoXCJoZXhcIilcclxuXHJcbiAgICAgIGV4cGVjdChzMSkudG9CZShzMilcclxuICAgICAgZXhwZWN0KHMyKS50b0JlKHMzKVxyXG4gICAgICBleHBlY3QoczMpLnRvQmUoczQpXHJcbiAgICB9XHJcbiAgKVxyXG5cclxuICB0ZXN0KFwiQklOUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHBsOiBCSU5QYXlsb2FkID0gcGF5bG9hZFR5cGVzLnNlbGVjdCgwLCBiaW5zdHIpIGFzIEJJTlBheWxvYWRcclxuICAgIGV4cGVjdChiaW50b29scy5idWZmZXJUb0I1OChwbC5yZXR1cm5UeXBlKCkpKS50b0JlKGJpbnN0cilcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiVVRGOFBheWxvYWQgc3BlY2lhbCBjYXNlc1wiLCAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBwbDogVVRGOFBheWxvYWQgPSBuZXcgVVRGOFBheWxvYWQodXRmOHN0cilcclxuICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKCkpLnRvQmUodXRmOHN0cilcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiSEVYU1RSUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHBsOiBIRVhTVFJQYXlsb2FkID0gbmV3IEhFWFNUUlBheWxvYWQodXRmOGhleClcclxuICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKCkpLnRvQmUodXRmOGhleClcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiQjU4U1RSUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHBsOiBCNThTVFJQYXlsb2FkID0gbmV3IEI1OFNUUlBheWxvYWQodXRmOGI1OClcclxuICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKCkpLnRvQmUodXRmOGI1OClcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiQjY0U1RSUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHBsOiBCNjRTVFJQYXlsb2FkID0gbmV3IEI2NFNUUlBheWxvYWQodXRmOGI2NClcclxuICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKCkpLnRvQmUodXRmOGI2NClcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiQklHTlVNUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IGplbm55OiBCTiA9IG5ldyBCTig4Njc1MzA5KVxyXG4gICAgY29uc3QgcGw6IEJJR05VTVBheWxvYWQgPSBuZXcgQklHTlVNUGF5bG9hZChqZW5ueSlcclxuICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKCkudG9TdHJpbmcoXCJoZXhcIikpLnRvQmUoamVubnkudG9TdHJpbmcoXCJoZXhcIikpXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcIlNXQVBDSEFJTkFERFJQYXlsb2FkIHNwZWNpYWwgY2FzZXNcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgYWRkcjogc3RyaW5nID0gYFN3YXAtJHtiZWNofWBcclxuICAgIGNvbnN0IHBsOiBTV0FQQ0hBSU5BRERSUGF5bG9hZCA9IG5ldyBTV0FQQ0hBSU5BRERSUGF5bG9hZChhZGRyLCBocnApXHJcbiAgICBleHBlY3QocGwucmV0dXJuVHlwZShocnApKS50b0JlKGFkZHIpXHJcbiAgICBleHBlY3QocGwucmV0dXJuQ2hhaW5JRCgpKS50b0JlKFwiU3dhcFwiKVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJDT1JFQ0hBSU5BRERSUGF5bG9hZCBzcGVjaWFsIGNhc2VzXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IGFkZHI6IHN0cmluZyA9IGBDb3JlLSR7YmVjaH1gXHJcbiAgICBjb25zdCBwbDogQ09SRUNIQUlOQUREUlBheWxvYWQgPSBuZXcgQ09SRUNIQUlOQUREUlBheWxvYWQoYWRkciwgaHJwKVxyXG4gICAgZXhwZWN0KHBsLnJldHVyblR5cGUoaHJwKSkudG9CZShhZGRyKVxyXG4gICAgZXhwZWN0KHBsLnJldHVybkNoYWluSUQoKSkudG9CZShcIkNvcmVcIilcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiQVhDSEFJTkFERFJQYXlsb2FkIHNwZWNpYWwgY2FzZXNcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgYWRkcjogc3RyaW5nID0gYEFYLSR7YmVjaH1gXHJcbiAgICBjb25zdCBwbDogQVhDSEFJTkFERFJQYXlsb2FkID0gbmV3IEFYQ0hBSU5BRERSUGF5bG9hZChhZGRyLCBocnApXHJcbiAgICBleHBlY3QocGwucmV0dXJuVHlwZShocnApKS50b0JlKGFkZHIpXHJcbiAgICBleHBlY3QocGwucmV0dXJuQ2hhaW5JRCgpKS50b0JlKFwiQVhcIilcclxuICB9KVxyXG5cclxuICAvLyBoYW5kbGVzIGFsbCBvZiBjYjU4RW5jb2RlZFBheWxvYWRcclxuICB0ZXN0KFwiVFhJRFBheWxvYWQgc3BlY2lhbCBjYXNlc1wiLCAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBwbDogVFhJRFBheWxvYWQgPSBuZXcgVFhJRFBheWxvYWQoY2I1OHN0cilcclxuICAgIGV4cGVjdChwbC5yZXR1cm5UeXBlKCkpLnRvQmUoY2I1OHN0cilcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiSlNPTlBheWxvYWQgc3BlY2lhbCBjYXNlc1wiLCAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBwbDogSlNPTlBheWxvYWQgPSBuZXcgSlNPTlBheWxvYWQoanNvbm9iailcclxuICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShwbC5yZXR1cm5UeXBlKCkpKS50b0JlKEpTT04uc3RyaW5naWZ5KGpzb25vYmopKVxyXG4gIH0pXHJcbn0pXHJcbiJdfQ==