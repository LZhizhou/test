"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jest_mock_axios_1 = __importDefault(require("jest-mock-axios"));
const src_1 = require("../src");
const api_1 = require("../src/apis/avm/api");
const api_2 = require("../src/apis/admin/api");
const api_3 = require("../src/apis/health/api");
const api_4 = require("../src/apis/info/api");
const api_5 = require("../src/apis/keystore/api");
const api_6 = require("../src/apis/metrics/api");
const api_7 = require("../src/apis/platformvm/api");
const testlib_1 = require("./testlib");
describe("Axia", () => {
    const blockchainID = "6h2s5de1VC65meajE1L2PjvZ1MXvHc3F6eqPCGKuDt4MxiweF";
    let host = "127.0.0.1";
    const port = 80;
    const networkID = 1337;
    let protocol = "https";
    let axia;
    let axiaCore;
    const api = "api.axc.network";
    const url = "https://api.axc.network:80";
    const encrypted = "https";
    const skipinit = true;
    beforeAll(() => {
        axia = new src_1.Axia(host, port, protocol, networkID, undefined, undefined, undefined, skipinit);
        axia.addAPI("admin", api_2.AdminAPI);
        axia.addAPI("swapchain", api_1.AVMAPI, "/ext/allychain/avm", blockchainID);
        axia.addAPI("health", api_3.HealthAPI);
        axia.addAPI("info", api_4.InfoAPI);
        axia.addAPI("keystore", api_5.KeystoreAPI);
        axia.addAPI("metrics", api_6.MetricsAPI);
        axia.addAPI("corechain", api_7.PlatformVMAPI);
    });
    test("Remove special characters", () => {
        host = "a&&&&p#i,.@a+v(a)x$.~n%e't:w*o?r<k>";
        protocol = "h@t&@&@t#p+s()$";
        axia = new src_1.Axia(host, port, protocol, networkID);
        expect(axia.getHost()).toBe(api);
        expect(axia.getProtocol()).toBe(encrypted);
        expect(axia.getURL()).toBe(url);
        axiaCore = new src_1.AxiaCore(host, port, protocol);
        expect(axiaCore.getHost()).toBe(api);
        expect(axiaCore.getProtocol()).toBe(encrypted);
        expect(axiaCore.getURL()).toBe(url);
    });
    test("Can specify base endpoint", () => {
        axia = new src_1.Axia();
        axia.setAddress(api, port, encrypted, "rpc");
        axia.setNetworkID(networkID);
        expect(axia.getHost()).toBe(api);
        expect(axia.getProtocol()).toBe(encrypted);
        expect(axia.getPort()).toBe(port);
        expect(axia.getBaseEndpoint()).toBe("rpc");
        expect(axia.getURL()).toBe(`${url}/rpc`);
        expect(axia.getNetworkID()).toBe(networkID);
    });
    test("Can initialize without port", () => {
        protocol = encrypted;
        host = api;
        axia = new src_1.Axia(host, undefined, protocol, networkID);
        expect(axia.getPort()).toBe(undefined);
        expect(axia.getURL()).toBe(`${protocol}://${api}`);
        axiaCore = new src_1.AxiaCore(host, undefined, protocol);
        expect(axiaCore.getPort()).toBe(undefined);
        expect(axiaCore.getURL()).toBe(`${protocol}://${api}`);
    });
    test("Can initialize with port", () => {
        protocol = encrypted;
        axia = new src_1.Axia(host, port, protocol, networkID);
        expect(axia.getIP()).toBe(host);
        expect(axia.getHost()).toBe(host);
        expect(axia.getPort()).toBe(port);
        expect(axia.getProtocol()).toBe(protocol);
        expect(axia.getURL()).toBe(`${protocol}://${host}:${port}`);
        expect(axia.getNetworkID()).toBe(1337);
        expect(axia.getHeaders()).toStrictEqual({});
        axia.setNetworkID(50);
        expect(axia.getNetworkID()).toBe(50);
        axia.setNetworkID(12345);
        expect(axia.getNetworkID()).toBe(12345);
    });
    test("Endpoints correct", () => {
        expect(axia.Admin()).not.toBeInstanceOf(api_1.AVMAPI);
        expect(axia.Admin()).toBeInstanceOf(api_2.AdminAPI);
        expect(axia.SwapChain()).not.toBeInstanceOf(api_2.AdminAPI);
        expect(axia.SwapChain()).toBeInstanceOf(api_1.AVMAPI);
        expect(axia.Health()).not.toBeInstanceOf(api_5.KeystoreAPI);
        expect(axia.Health()).toBeInstanceOf(api_3.HealthAPI);
        expect(axia.Info()).not.toBeInstanceOf(api_5.KeystoreAPI);
        expect(axia.Info()).toBeInstanceOf(api_4.InfoAPI);
        expect(axia.CoreChain()).not.toBeInstanceOf(api_5.KeystoreAPI);
        expect(axia.CoreChain()).toBeInstanceOf(api_7.PlatformVMAPI);
        expect(axia.NodeKeys()).not.toBeInstanceOf(api_7.PlatformVMAPI);
        expect(axia.NodeKeys()).toBeInstanceOf(api_5.KeystoreAPI);
        expect(axia.Metrics()).not.toBeInstanceOf(api_5.KeystoreAPI);
        expect(axia.Metrics()).toBeInstanceOf(api_6.MetricsAPI);
        expect(axia.Admin().getRPCID()).toBe(1);
        expect(axia.SwapChain().getRPCID()).toBe(1);
        expect(axia.CoreChain().getRPCID()).toBe(1);
        expect(axia.NodeKeys().getRPCID()).toBe(1);
    });
    test("Create new API", () => {
        axia.addAPI("avm2", api_1.AVMAPI);
        expect(axia.api("avm2")).toBeInstanceOf(api_1.AVMAPI);
        axia.addAPI("keystore2", api_5.KeystoreAPI, "/ext/keystore2");
        expect(axia.api("keystore2")).toBeInstanceOf(api_5.KeystoreAPI);
        axia.api("keystore2").setBaseURL("/ext/keystore3");
        expect(axia.api("keystore2").getBaseURL()).toBe("/ext/keystore3");
        expect(axia.api("keystore2").getDB()).toHaveProperty("namespace");
    });
    test("Customize headers", () => {
        axia.setHeader("Swap-Custom-Header", "example");
        axia.setHeader("Swap-Foo", "Foo");
        axia.setHeader("Swap-Bar", "Bar");
        expect(axia.getHeaders()).toStrictEqual({
            "Swap-Custom-Header": "example",
            "Swap-Foo": "Foo",
            "Swap-Bar": "Bar"
        });
        axia.removeHeader("Swap-Foo");
        expect(axia.getHeaders()).toStrictEqual({
            "Swap-Custom-Header": "example",
            "Swap-Bar": "Bar"
        });
        axia.removeAllHeaders();
        expect(axia.getHeaders()).toStrictEqual({});
    });
    test("Customize request config", () => {
        expect(axia.getRequestConfig()).toStrictEqual({});
        axia.setRequestConfig("withCredentials", true);
        axia.setRequestConfig("withFoo", "Foo");
        axia.setRequestConfig("withBar", "Bar");
        expect(axia.getRequestConfig()).toStrictEqual({
            withCredentials: true,
            withFoo: "Foo",
            withBar: "Bar"
        });
        axia.removeRequestConfig("withFoo");
        expect(axia.getRequestConfig()).toStrictEqual({
            withCredentials: true,
            withBar: "Bar"
        });
        axia.removeAllRequestConfigs();
        expect(axia.getRequestConfig()).toStrictEqual({});
    });
});
describe("HTTP Operations", () => {
    const host = "127.0.0.1";
    const port = 8080;
    const protocol = "http";
    const path = "/ext/testingrequests";
    let axia;
    beforeAll(() => {
        axia = new src_1.Axia(host, port, protocol, 12345, undefined, undefined, undefined, true);
        axia.addAPI("testingrequests", testlib_1.TestAPI, path);
    });
    afterEach(() => {
        jest_mock_axios_1.default.reset();
    });
    test("GET works", () => __awaiter(void 0, void 0, void 0, function* () {
        const input = "TestGET";
        const api = axia.api("testingrequests");
        const result = api.TestGET(input, `/${input}`);
        const payload = {
            result: {
                output: input
            }
        };
        const responseObj = {
            data: payload
        };
        jest_mock_axios_1.default.mockResponse(responseObj);
        const response = yield result;
        expect(jest_mock_axios_1.default.request).toHaveBeenCalledTimes(1);
        expect(response.output).toBe(input);
    }));
    test("DELETE works", () => __awaiter(void 0, void 0, void 0, function* () {
        const input = "TestDELETE";
        const api = axia.api("testingrequests");
        const axiosConfig = {
            baseURL: `${protocol}://${host}:${port}`,
            responseType: "text"
        };
        const result = api.TestDELETE(input, `/${input}`, axiosConfig);
        const payload = {
            result: {
                output: input
            }
        };
        const responseObj = {
            data: payload
        };
        jest_mock_axios_1.default.mockResponse(responseObj);
        const response = yield result;
        expect(jest_mock_axios_1.default.request).toHaveBeenCalledTimes(1);
        expect(response.output).toBe(input);
    }));
    test("POST works", () => __awaiter(void 0, void 0, void 0, function* () {
        const input = "TestPOST";
        const api = axia.api("testingrequests");
        const result = api.TestPOST(input, `/${input}`);
        const payload = {
            result: {
                output: input
            }
        };
        const responseObj = {
            data: payload
        };
        jest_mock_axios_1.default.mockResponse(responseObj);
        const response = yield result;
        expect(jest_mock_axios_1.default.request).toHaveBeenCalledTimes(1);
        expect(response.output).toBe(input);
    }));
    test("PUT works", () => __awaiter(void 0, void 0, void 0, function* () {
        const input = "TestPUT";
        const api = axia.api("testingrequests");
        const result = api.TestPUT(input, `/${input}`);
        const payload = {
            result: {
                output: input
            }
        };
        const responseObj = {
            data: payload
        };
        jest_mock_axios_1.default.mockResponse(responseObj);
        const response = yield result;
        expect(jest_mock_axios_1.default.request).toHaveBeenCalledTimes(1);
        expect(response.output).toBe(input);
    }));
    test("PATCH works", () => __awaiter(void 0, void 0, void 0, function* () {
        const input = "TestPATCH";
        const api = axia.api("testingrequests");
        const result = api.TestPATCH(input, `/${input}`);
        const payload = {
            result: {
                output: input
            }
        };
        const responseObj = {
            data: payload
        };
        jest_mock_axios_1.default.mockResponse(responseObj);
        const response = yield result;
        expect(jest_mock_axios_1.default.request).toHaveBeenCalledTimes(1);
        expect(response.output).toBe(input);
    }));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXhpYS50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vdGVzdHMvYXhpYS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0VBQXVDO0FBQ3ZDLGdDQUF1QztBQUN2Qyw2Q0FBNEM7QUFDNUMsK0NBQWdEO0FBQ2hELGdEQUFrRDtBQUNsRCw4Q0FBOEM7QUFDOUMsa0RBQXNEO0FBQ3RELGlEQUFvRDtBQUNwRCxvREFBMEQ7QUFDMUQsdUNBQW1DO0FBSW5DLFFBQVEsQ0FBQyxNQUFNLEVBQUUsR0FBUyxFQUFFO0lBQzFCLE1BQU0sWUFBWSxHQUNoQixtREFBbUQsQ0FBQTtJQUNyRCxJQUFJLElBQUksR0FBVyxXQUFXLENBQUE7SUFDOUIsTUFBTSxJQUFJLEdBQVcsRUFBRSxDQUFBO0lBQ3ZCLE1BQU0sU0FBUyxHQUFXLElBQUksQ0FBQTtJQUM5QixJQUFJLFFBQVEsR0FBVyxPQUFPLENBQUE7SUFDOUIsSUFBSSxJQUFVLENBQUE7SUFDZCxJQUFJLFFBQWtCLENBQUE7SUFDdEIsTUFBTSxHQUFHLEdBQVcsaUJBQWlCLENBQUE7SUFDckMsTUFBTSxHQUFHLEdBQVcsNEJBQTRCLENBQUE7SUFDaEQsTUFBTSxTQUFTLEdBQVcsT0FBTyxDQUFBO0lBQ2pDLE1BQU0sUUFBUSxHQUFZLElBQUksQ0FBQTtJQUM5QixTQUFTLENBQUMsR0FBUyxFQUFFO1FBQ25CLElBQUksR0FBRyxJQUFJLFVBQUksQ0FDYixJQUFJLEVBQ0osSUFBSSxFQUNKLFFBQVEsRUFDUixTQUFTLEVBQ1QsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsUUFBUSxDQUNULENBQUE7UUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxjQUFRLENBQUMsQ0FBQTtRQUM5QixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxZQUFNLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxDQUFDLENBQUE7UUFDcEUsSUFBSSxDQUFD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Q0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vY2tBeGlvcyBmcm9tIFwiamVzdC1tb2NrLWF4aW9zXCJcclxuaW1wb3J0IHsgQXhpYSwgQXhpYUNvcmUgfSBmcm9tIFwiLi4vc3JjXCJcclxuaW1wb3J0IHsgQVZNQVBJIH0gZnJvbSBcIi4uL3NyYy9hcGlzL2F2bS9hcGlcIlxyXG5pbXBvcnQgeyBBZG1pbkFQSSB9IGZyb20gXCIuLi9zcmMvYXBpcy9hZG1pbi9hcGlcIlxyXG5pbXBvcnQgeyBIZWFsdGhBUEkgfSBmcm9tIFwiLi4vc3JjL2FwaXMvaGVhbHRoL2FwaVwiXHJcbmltcG9ydCB7IEluZm9BUEkgfSBmcm9tIFwiLi4vc3JjL2FwaXMvaW5mby9hcGlcIlxyXG5pbXBvcnQgeyBLZXlzdG9yZUFQSSB9IGZyb20gXCIuLi9zcmMvYXBpcy9rZXlzdG9yZS9hcGlcIlxyXG5pbXBvcnQgeyBNZXRyaWNzQVBJIH0gZnJvbSBcIi4uL3NyYy9hcGlzL21ldHJpY3MvYXBpXCJcclxuaW1wb3J0IHsgUGxhdGZvcm1WTUFQSSB9IGZyb20gXCIuLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL2FwaVwiXHJcbmltcG9ydCB7IFRlc3RBUEkgfSBmcm9tIFwiLi90ZXN0bGliXCJcclxuaW1wb3J0IHsgQXhpb3NSZXF1ZXN0Q29uZmlnIH0gZnJvbSBcImF4aW9zXCJcclxuaW1wb3J0IHsgSHR0cFJlc3BvbnNlIH0gZnJvbSBcImplc3QtbW9jay1heGlvcy9kaXN0L2xpYi9tb2NrLWF4aW9zLXR5cGVzXCJcclxuXHJcbmRlc2NyaWJlKFwiQXhpYVwiLCAoKTogdm9pZCA9PiB7XHJcbiAgY29uc3QgYmxvY2tjaGFpbklEOiBzdHJpbmcgPVxyXG4gICAgXCI2aDJzNWRlMVZDNjVtZWFqRTFMMlBqdloxTVh2SGMzRjZlcVBDR0t1RHQ0TXhpd2VGXCJcclxuICBsZXQgaG9zdDogc3RyaW5nID0gXCIxMjcuMC4wLjFcIlxyXG4gIGNvbnN0IHBvcnQ6IG51bWJlciA9IDgwXHJcbiAgY29uc3QgbmV0d29ya0lEOiBudW1iZXIgPSAxMzM3XHJcbiAgbGV0IHByb3RvY29sOiBzdHJpbmcgPSBcImh0dHBzXCJcclxuICBsZXQgYXhpYTogQXhpYVxyXG4gIGxldCBheGlhQ29yZTogQXhpYUNvcmVcclxuICBjb25zdCBhcGk6IHN0cmluZyA9IFwiYXBpLmF4Yy5uZXR3b3JrXCJcclxuICBjb25zdCB1cmw6IHN0cmluZyA9IFwiaHR0cHM6Ly9hcGkuYXhjLm5ldHdvcms6ODBcIlxyXG4gIGNvbnN0IGVuY3J5cHRlZDogc3RyaW5nID0gXCJodHRwc1wiXHJcbiAgY29uc3Qgc2tpcGluaXQ6IGJvb2xlYW4gPSB0cnVlXHJcbiAgYmVmb3JlQWxsKCgpOiB2b2lkID0+IHtcclxuICAgIGF4aWEgPSBuZXcgQXhpYShcclxuICAgICAgaG9zdCxcclxuICAgICAgcG9ydCxcclxuICAgICAgcHJvdG9jb2wsXHJcbiAgICAgIG5ldHdvcmtJRCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgc2tpcGluaXRcclxuICAgIClcclxuICAgIGF4aWEuYWRkQVBJKFwiYWRtaW5cIiwgQWRtaW5BUEkpXHJcbiAgICBheGlhLmFkZEFQSShcInN3YXBjaGFpblwiLCBBVk1BUEksIFwiL2V4dC9hbGx5Y2hhaW4vYXZtXCIsIGJsb2NrY2hhaW5JRClcclxuICAgIGF4aWEuYWRkQVBJKFwiaGVhbHRoXCIsIEhlYWx0aEFQSSlcclxuICAgIGF4aWEuYWRkQVBJKFwiaW5mb1wiLCBJbmZvQVBJKVxyXG4gICAgYXhpYS5hZGRBUEkoXCJrZXlzdG9yZVwiLCBLZXlzdG9yZUFQSSlcclxuICAgIGF4aWEuYWRkQVBJKFwibWV0cmljc1wiLCBNZXRyaWNzQVBJKVxyXG4gICAgYXhpYS5hZGRBUEkoXCJjb3JlY2hhaW5cIiwgUGxhdGZvcm1WTUFQSSlcclxuICB9KVxyXG4gIHRlc3QoXCJSZW1vdmUgc3BlY2lhbCBjaGFyYWN0ZXJzXCIsICgpOiB2b2lkID0+IHtcclxuICAgIGhvc3QgPSBcImEmJiYmcCNpLC5AYSt2KGEpeCQufm4lZSd0Oncqbz9yPGs+XCJcclxuICAgIHByb3RvY29sID0gXCJoQHQmQCZAdCNwK3MoKSRcIlxyXG4gICAgYXhpYSA9IG5ldyBBeGlhKGhvc3QsIHBvcnQsIHByb3RvY29sLCBuZXR3b3JrSUQpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRIb3N0KCkpLnRvQmUoYXBpKVxyXG4gICAgZXhwZWN0KGF4aWEuZ2V0UHJvdG9jb2woKSkudG9CZShlbmNyeXB0ZWQpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRVUkwoKSkudG9CZSh1cmwpXHJcbiAgICBheGlhQ29yZSA9IG5ldyBBeGlhQ29yZShob3N0LCBwb3J0LCBwcm90b2NvbClcclxuICAgIGV4cGVjdChheGlhQ29yZS5nZXRIb3N0KCkpLnRvQmUoYXBpKVxyXG4gICAgZXhwZWN0KGF4aWFDb3JlLmdldFByb3RvY29sKCkpLnRvQmUoZW5jcnlwdGVkKVxyXG4gICAgZXhwZWN0KGF4aWFDb3JlLmdldFVSTCgpKS50b0JlKHVybClcclxuICB9KVxyXG4gIHRlc3QoXCJDYW4gc3BlY2lmeSBiYXNlIGVuZHBvaW50XCIsICgpOiB2b2lkID0+IHtcclxuICAgIGF4aWEgPSBuZXcgQXhpYSgpXHJcbiAgICBheGlhLnNldEFkZHJlc3MoYXBpLCBwb3J0LCBlbmNyeXB0ZWQsIFwicnBjXCIpXHJcbiAgICBheGlhLnNldE5ldHdvcmtJRChuZXR3b3JrSUQpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRIb3N0KCkpLnRvQmUoYXBpKVxyXG4gICAgZXhwZWN0KGF4aWEuZ2V0UHJvdG9jb2woKSkudG9CZShlbmNyeXB0ZWQpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRQb3J0KCkpLnRvQmUocG9ydClcclxuICAgIGV4cGVjdChheGlhLmdldEJhc2VFbmRwb2ludCgpKS50b0JlKFwicnBjXCIpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRVUkwoKSkudG9CZShgJHt1cmx9L3JwY2ApXHJcbiAgICBleHBlY3QoYXhpYS5nZXROZXR3b3JrSUQoKSkudG9CZShuZXR3b3JrSUQpXHJcbiAgfSlcclxuICB0ZXN0KFwiQ2FuIGluaXRpYWxpemUgd2l0aG91dCBwb3J0XCIsICgpOiB2b2lkID0+IHtcclxuICAgIHByb3RvY29sID0gZW5jcnlwdGVkXHJcbiAgICBob3N0ID0gYXBpXHJcbiAgICBheGlhID0gbmV3IEF4aWEoaG9zdCwgdW5kZWZpbmVkLCBwcm90b2NvbCwgbmV0d29ya0lEKVxyXG4gICAgZXhwZWN0KGF4aWEuZ2V0UG9ydCgpKS50b0JlKHVuZGVmaW5lZClcclxuICAgIGV4cGVjdChheGlhLmdldFVSTCgpKS50b0JlKGAke3Byb3RvY29sfTovLyR7YXBpfWApXHJcbiAgICBheGlhQ29yZSA9IG5ldyBBeGlhQ29yZShob3N0LCB1bmRlZmluZWQsIHByb3RvY29sKVxyXG4gICAgZXhwZWN0KGF4aWFDb3JlLmdldFBvcnQoKSkudG9CZSh1bmRlZmluZWQpXHJcbiAgICBleHBlY3QoYXhpYUNvcmUuZ2V0VVJMKCkpLnRvQmUoYCR7cHJvdG9jb2x9Oi8vJHthcGl9YClcclxuICB9KVxyXG4gIHRlc3QoXCJDYW4gaW5pdGlhbGl6ZSB3aXRoIHBvcnRcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgcHJvdG9jb2wgPSBlbmNyeXB0ZWRcclxuICAgIGF4aWEgPSBuZXcgQXhpYShob3N0LCBwb3J0LCBwcm90b2NvbCwgbmV0d29ya0lEKVxyXG4gICAgZXhwZWN0KGF4aWEuZ2V0SVAoKSkudG9CZShob3N0KVxyXG4gICAgZXhwZWN0KGF4aWEuZ2V0SG9zdCgpKS50b0JlKGhvc3QpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRQb3J0KCkpLnRvQmUocG9ydClcclxuICAgIGV4cGVjdChheGlhLmdldFByb3RvY29sKCkpLnRvQmUocHJvdG9jb2wpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRVUkwoKSkudG9CZShgJHtwcm90b2NvbH06Ly8ke2hvc3R9OiR7cG9ydH1gKVxyXG4gICAgZXhwZWN0KGF4aWEuZ2V0TmV0d29ya0lEKCkpLnRvQmUoMTMzNylcclxuICAgIGV4cGVjdChheGlhLmdldEhlYWRlcnMoKSkudG9TdHJpY3RFcXVhbCh7fSlcclxuICAgIGF4aWEuc2V0TmV0d29ya0lEKDUwKVxyXG4gICAgZXhwZWN0KGF4aWEuZ2V0TmV0d29ya0lEKCkpLnRvQmUoNTApXHJcbiAgICBheGlhLnNldE5ldHdvcmtJRCgxMjM0NSlcclxuICAgIGV4cGVjdChheGlhLmdldE5ldHdvcmtJRCgpKS50b0JlKDEyMzQ1KVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJFbmRwb2ludHMgY29ycmVjdFwiLCAoKTogdm9pZCA9PiB7XHJcbiAgICBleHBlY3QoYXhpYS5BZG1pbigpKS5ub3QudG9CZUluc3RhbmNlT2YoQVZNQVBJKVxyXG4gICAgZXhwZWN0KGF4aWEuQWRtaW4oKSkudG9CZUluc3RhbmNlT2YoQWRtaW5BUEkpXHJcblxyXG4gICAgZXhwZWN0KGF4aWEuU3dhcENoYWluKCkpLm5vdC50b0JlSW5zdGFuY2VPZihBZG1pbkFQSSlcclxuICAgIGV4cGVjdChheGlhLlN3YXBDaGFpbigpKS50b0JlSW5zdGFuY2VPZihBVk1BUEkpXHJcblxyXG4gICAgZXhwZWN0KGF4aWEuSGVhbHRoKCkpLm5vdC50b0JlSW5zdGFuY2VPZihLZXlzdG9yZUFQSSlcclxuICAgIGV4cGVjdChheGlhLkhlYWx0aCgpKS50b0JlSW5zdGFuY2VPZihIZWFsdGhBUEkpXHJcblxyXG4gICAgZXhwZWN0KGF4aWEuSW5mbygpKS5ub3QudG9CZUluc3RhbmNlT2YoS2V5c3RvcmVBUEkpXHJcbiAgICBleHBlY3QoYXhpYS5JbmZvKCkpLnRvQmVJbnN0YW5jZU9mKEluZm9BUEkpXHJcblxyXG4gICAgZXhwZWN0KGF4aWEuQ29yZUNoYWluKCkpLm5vdC50b0JlSW5zdGFuY2VPZihLZXlzdG9yZUFQSSlcclxuICAgIGV4cGVjdChheGlhLkNvcmVDaGFpbigpKS50b0JlSW5zdGFuY2VPZihQbGF0Zm9ybVZNQVBJKVxyXG5cclxuICAgIGV4cGVjdChheGlhLk5vZGVLZXlzKCkpLm5vdC50b0JlSW5zdGFuY2VPZihQbGF0Zm9ybVZNQVBJKVxyXG4gICAgZXhwZWN0KGF4aWEuTm9kZUtleXMoKSkudG9CZUluc3RhbmNlT2YoS2V5c3RvcmVBUEkpXHJcblxyXG4gICAgZXhwZWN0KGF4aWEuTWV0cmljcygpKS5ub3QudG9CZUluc3RhbmNlT2YoS2V5c3RvcmVBUEkpXHJcbiAgICBleHBlY3QoYXhpYS5NZXRyaWNzKCkpLnRvQmVJbnN0YW5jZU9mKE1ldHJpY3NBUEkpXHJcblxyXG4gICAgZXhwZWN0KGF4aWEuQWRtaW4oKS5nZXRSUENJRCgpKS50b0JlKDEpXHJcbiAgICBleHBlY3QoYXhpYS5Td2FwQ2hhaW4oKS5nZXRSUENJRCgpKS50b0JlKDEpXHJcbiAgICBleHBlY3QoYXhpYS5Db3JlQ2hhaW4oKS5nZXRSUENJRCgpKS50b0JlKDEpXHJcbiAgICBleHBlY3QoYXhpYS5Ob2RlS2V5cygpLmdldFJQQ0lEKCkpLnRvQmUoMSlcclxuICB9KVxyXG5cclxuICB0ZXN0KFwiQ3JlYXRlIG5ldyBBUElcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgYXhpYS5hZGRBUEkoXCJhdm0yXCIsIEFWTUFQSSlcclxuICAgIGV4cGVjdChheGlhLmFwaShcImF2bTJcIikpLnRvQmVJbnN0YW5jZU9mKEFWTUFQSSlcclxuXHJcbiAgICBheGlhLmFkZEFQSShcImtleXN0b3JlMlwiLCBLZXlzdG9yZUFQSSwgXCIvZXh0L2tleXN0b3JlMlwiKVxyXG4gICAgZXhwZWN0KGF4aWEuYXBpKFwia2V5c3RvcmUyXCIpKS50b0JlSW5zdGFuY2VPZihLZXlzdG9yZUFQSSlcclxuXHJcbiAgICBheGlhLmFwaShcImtleXN0b3JlMlwiKS5zZXRCYXNlVVJMKFwiL2V4dC9rZXlzdG9yZTNcIilcclxuICAgIGV4cGVjdChheGlhLmFwaShcImtleXN0b3JlMlwiKS5nZXRCYXNlVVJMKCkpLnRvQmUoXCIvZXh0L2tleXN0b3JlM1wiKVxyXG5cclxuICAgIGV4cGVjdChheGlhLmFwaShcImtleXN0b3JlMlwiKS5nZXREQigpKS50b0hhdmVQcm9wZXJ0eShcIm5hbWVzcGFjZVwiKVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJDdXN0b21pemUgaGVhZGVyc1wiLCAoKTogdm9pZCA9PiB7XHJcbiAgICBheGlhLnNldEhlYWRlcihcIlN3YXAtQ3VzdG9tLUhlYWRlclwiLCBcImV4YW1wbGVcIilcclxuICAgIGF4aWEuc2V0SGVhZGVyKFwiU3dhcC1Gb29cIiwgXCJGb29cIilcclxuICAgIGF4aWEuc2V0SGVhZGVyKFwiU3dhcC1CYXJcIiwgXCJCYXJcIilcclxuICAgIGV4cGVjdChheGlhLmdldEhlYWRlcnMoKSkudG9TdHJpY3RFcXVhbCh7XHJcbiAgICAgIFwiU3dhcC1DdXN0b20tSGVhZGVyXCI6IFwiZXhhbXBsZVwiLFxyXG4gICAgICBcIlN3YXAtRm9vXCI6IFwiRm9vXCIsXHJcbiAgICAgIFwiU3dhcC1CYXJcIjogXCJCYXJcIlxyXG4gICAgfSlcclxuICAgIGF4aWEucmVtb3ZlSGVhZGVyKFwiU3dhcC1Gb29cIilcclxuICAgIGV4cGVjdChheGlhLmdldEhlYWRlcnMoKSkudG9TdHJpY3RFcXVhbCh7XHJcbiAgICAgIFwiU3dhcC1DdXN0b20tSGVhZGVyXCI6IFwiZXhhbXBsZVwiLFxyXG4gICAgICBcIlN3YXAtQmFyXCI6IFwiQmFyXCJcclxuICAgIH0pXHJcbiAgICBheGlhLnJlbW92ZUFsbEhlYWRlcnMoKVxyXG4gICAgZXhwZWN0KGF4aWEuZ2V0SGVhZGVycygpKS50b1N0cmljdEVxdWFsKHt9KVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJDdXN0b21pemUgcmVxdWVzdCBjb25maWdcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgZXhwZWN0KGF4aWEuZ2V0UmVxdWVzdENvbmZpZygpKS50b1N0cmljdEVxdWFsKHt9KVxyXG4gICAgYXhpYS5zZXRSZXF1ZXN0Q29uZmlnKFwid2l0aENyZWRlbnRpYWxzXCIsIHRydWUpXHJcbiAgICBheGlhLnNldFJlcXVlc3RDb25maWcoXCJ3aXRoRm9vXCIsIFwiRm9vXCIpXHJcbiAgICBheGlhLnNldFJlcXVlc3RDb25maWcoXCJ3aXRoQmFyXCIsIFwiQmFyXCIpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRSZXF1ZXN0Q29uZmlnKCkpLnRvU3RyaWN0RXF1YWwoe1xyXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXHJcbiAgICAgIHdpdGhGb286IFwiRm9vXCIsXHJcbiAgICAgIHdpdGhCYXI6IFwiQmFyXCJcclxuICAgIH0pXHJcbiAgICBheGlhLnJlbW92ZVJlcXVlc3RDb25maWcoXCJ3aXRoRm9vXCIpXHJcbiAgICBleHBlY3QoYXhpYS5nZXRSZXF1ZXN0Q29uZmlnKCkpLnRvU3RyaWN0RXF1YWwoe1xyXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXHJcbiAgICAgIHdpdGhCYXI6IFwiQmFyXCJcclxuICAgIH0pXHJcbiAgICBheGlhLnJlbW92ZUFsbFJlcXVlc3RDb25maWdzKClcclxuICAgIGV4cGVjdChheGlhLmdldFJlcXVlc3RDb25maWcoKSkudG9TdHJpY3RFcXVhbCh7fSlcclxuICB9KVxyXG59KVxyXG5cclxuZGVzY3JpYmUoXCJIVFRQIE9wZXJhdGlvbnNcIiwgKCk6IHZvaWQgPT4ge1xyXG4gIGNvbnN0IGhvc3Q6IHN0cmluZyA9IFwiMTI3LjAuMC4xXCJcclxuICBjb25zdCBwb3J0OiBudW1iZXIgPSA4MDgwXHJcbiAgY29uc3QgcHJvdG9jb2w6IHN0cmluZyA9IFwiaHR0cFwiXHJcbiAgY29uc3QgcGF0aDogc3RyaW5nID0gXCIvZXh0L3Rlc3RpbmdyZXF1ZXN0c1wiXHJcbiAgbGV0IGF4aWE6IEF4aWFcclxuICBiZWZvcmVBbGwoKCk6IHZvaWQgPT4ge1xyXG4gICAgYXhpYSA9IG5ldyBBeGlhKFxyXG4gICAgICBob3N0LFxyXG4gICAgICBwb3J0LFxyXG4gICAgICBwcm90b2NvbCxcclxuICAgICAgMTIzNDUsXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIHRydWVcclxuICAgIClcclxuICAgIGF4aWEuYWRkQVBJKFwidGVzdGluZ3JlcXVlc3RzXCIsIFRlc3RBUEksIHBhdGgpXHJcbiAgfSlcclxuXHJcbiAgYWZ0ZXJFYWNoKCgpOiB2b2lkID0+IHtcclxuICAgIG1vY2tBeGlvcy5yZXNldCgpXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcIkdFVCB3b3Jrc1wiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBjb25zdCBpbnB1dDogc3RyaW5nID0gXCJUZXN0R0VUXCJcclxuICAgIGNvbnN0IGFwaTogVGVzdEFQSSA9IGF4aWEuYXBpKFwidGVzdGluZ3JlcXVlc3RzXCIpXHJcbiAgICBjb25zdCByZXN1bHQ6IFByb21pc2U8b2JqZWN0PiA9IGFwaS5UZXN0R0VUKGlucHV0LCBgLyR7aW5wdXR9YClcclxuICAgIGNvbnN0IHBheWxvYWQ6IG9iamVjdCA9IHtcclxuICAgICAgcmVzdWx0OiB7XHJcbiAgICAgICAgb3V0cHV0OiBpbnB1dFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZU9iajogSHR0cFJlc3BvbnNlID0ge1xyXG4gICAgICBkYXRhOiBwYXlsb2FkXHJcbiAgICB9XHJcbiAgICBtb2NrQXhpb3MubW9ja1Jlc3BvbnNlKHJlc3BvbnNlT2JqKVxyXG4gICAgY29uc3QgcmVzcG9uc2U6IGFueSA9IGF3YWl0IHJlc3VsdFxyXG4gICAgZXhwZWN0KG1vY2tBeGlvcy5yZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSlcclxuICAgIGV4cGVjdChyZXNwb25zZS5vdXRwdXQpLnRvQmUoaW5wdXQpXHJcbiAgfSlcclxuXHJcbiAgdGVzdChcIkRFTEVURSB3b3Jrc1wiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBjb25zdCBpbnB1dDogc3RyaW5nID0gXCJUZXN0REVMRVRFXCJcclxuICAgIGNvbnN0IGFwaTogVGVzdEFQSSA9IGF4aWEuYXBpKFwidGVzdGluZ3JlcXVlc3RzXCIpXHJcbiAgICBjb25zdCBheGlvc0NvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnID0ge1xyXG4gICAgICBiYXNlVVJMOiBgJHtwcm90b2NvbH06Ly8ke2hvc3R9OiR7cG9ydH1gLFxyXG4gICAgICByZXNwb25zZVR5cGU6IFwidGV4dFwiXHJcbiAgICB9XHJcbiAgICBjb25zdCByZXN1bHQ6IFByb21pc2U8b2JqZWN0PiA9IGFwaS5UZXN0REVMRVRFKFxyXG4gICAgICBpbnB1dCxcclxuICAgICAgYC8ke2lucHV0fWAsXHJcbiAgICAgIGF4aW9zQ29uZmlnXHJcbiAgICApXHJcbiAgICBjb25zdCBwYXlsb2FkOiBvYmplY3QgPSB7XHJcbiAgICAgIHJlc3VsdDoge1xyXG4gICAgICAgIG91dHB1dDogaW5wdXRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2VPYmo6IEh0dHBSZXNwb25zZSA9IHtcclxuICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgfVxyXG4gICAgbW9ja0F4aW9zLm1vY2tSZXNwb25zZShyZXNwb25zZU9iailcclxuICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSBhd2FpdCByZXN1bHRcclxuICAgIGV4cGVjdChtb2NrQXhpb3MucmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpXHJcbiAgICBleHBlY3QocmVzcG9uc2Uub3V0cHV0KS50b0JlKGlucHV0KVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJQT1NUIHdvcmtzXCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGNvbnN0IGlucHV0OiBzdHJpbmcgPSBcIlRlc3RQT1NUXCJcclxuICAgIGNvbnN0IGFwaTogVGVzdEFQSSA9IGF4aWEuYXBpKFwidGVzdGluZ3JlcXVlc3RzXCIpXHJcbiAgICBjb25zdCByZXN1bHQ6IFByb21pc2U8b2JqZWN0PiA9IGFwaS5UZXN0UE9TVChpbnB1dCwgYC8ke2lucHV0fWApXHJcbiAgICBjb25zdCBwYXlsb2FkOiBvYmplY3QgPSB7XHJcbiAgICAgIHJlc3VsdDoge1xyXG4gICAgICAgIG91dHB1dDogaW5wdXRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2VPYmo6IEh0dHBSZXNwb25zZSA9IHtcclxuICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgfVxyXG4gICAgbW9ja0F4aW9zLm1vY2tSZXNwb25zZShyZXNwb25zZU9iailcclxuICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSBhd2FpdCByZXN1bHRcclxuICAgIGV4cGVjdChtb2NrQXhpb3MucmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpXHJcbiAgICBleHBlY3QocmVzcG9uc2Uub3V0cHV0KS50b0JlKGlucHV0KVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJQVVQgd29ya3NcIiwgYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgY29uc3QgaW5wdXQ6IHN0cmluZyA9IFwiVGVzdFBVVFwiXHJcbiAgICBjb25zdCBhcGk6IFRlc3RBUEkgPSBheGlhLmFwaShcInRlc3RpbmdyZXF1ZXN0c1wiKVxyXG4gICAgY29uc3QgcmVzdWx0OiBQcm9taXNlPG9iamVjdD4gPSBhcGkuVGVzdFBVVChpbnB1dCwgYC8ke2lucHV0fWApXHJcbiAgICBjb25zdCBwYXlsb2FkOiBvYmplY3QgPSB7XHJcbiAgICAgIHJlc3VsdDoge1xyXG4gICAgICAgIG91dHB1dDogaW5wdXRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2VPYmo6IEh0dHBSZXNwb25zZSA9IHtcclxuICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgfVxyXG4gICAgbW9ja0F4aW9zLm1vY2tSZXNwb25zZShyZXNwb25zZU9iailcclxuICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSBhd2FpdCByZXN1bHRcclxuICAgIGV4cGVjdChtb2NrQXhpb3MucmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpXHJcbiAgICBleHBlY3QocmVzcG9uc2Uub3V0cHV0KS50b0JlKGlucHV0KVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoXCJQQVRDSCB3b3Jrc1wiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBjb25zdCBpbnB1dDogc3RyaW5nID0gXCJUZXN0UEFUQ0hcIlxyXG4gICAgY29uc3QgYXBpOiBUZXN0QVBJID0gYXhpYS5hcGkoXCJ0ZXN0aW5ncmVxdWVzdHNcIilcclxuICAgIGNvbnN0IHJlc3VsdDogUHJvbWlzZTxvYmplY3Q+ID0gYXBpLlRlc3RQQVRDSChpbnB1dCwgYC8ke2lucHV0fWApXHJcbiAgICBjb25zdCBwYXlsb2FkOiBvYmplY3QgPSB7XHJcbiAgICAgIHJlc3VsdDoge1xyXG4gICAgICAgIG91dHB1dDogaW5wdXRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2VPYmo6IEh0dHBSZXNwb25zZSA9IHtcclxuICAgICAgZGF0YTogcGF5bG9hZFxyXG4gICAgfVxyXG4gICAgbW9ja0F4aW9zLm1vY2tSZXNwb25zZShyZXNwb25zZU9iailcclxuICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSBhd2FpdCByZXN1bHRcclxuICAgIGV4cGVjdChtb2NrQXhpb3MucmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpXHJcbiAgICBleHBlY3QocmVzcG9uc2Uub3V0cHV0KS50b0JlKGlucHV0KVxyXG4gIH0pXHJcbn0pXHJcbiJdfQ==